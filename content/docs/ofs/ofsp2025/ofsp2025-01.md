---
uid: 2025083101
title: ofsp2025-01
date: 2025-07-22
update: 2025-08-26
authors:
  - name: Aerosand
    link: https://github.com/aerosand
    image: https://github.com/aerosand.png
tags:
  - ofsp2025
  - OpenFOAM
excludeSearch: false
toc: true
weight: 1
math: true
next:
prev:
comments: true
draft: false
---

> å‚è€ƒï¼š
> - https://github.com/UnnamedMoose/BasicOpenFOAMProgrammingTutorials
> - https://www.topcfd.cn/simulation/solve/openfoam/openfoam-program/
> - https://www.tfd.chalmers.se/~hani/kurser/OS_CFD/
> - https://github.com/ParticulateFlow/OSCCAR-doc/blob/master/openFoamUserManual_PFM.pdf
> - https://www.youtube.com/watch?v=KB9HhggUi_E&ab_channel=UCLOpenFOAMWorkshop
> - http://dyfluid.com/#
> 
> æ„Ÿè°¢åŸä½œè€…ä»¬çš„æ— ç§å¼•è·¯å’Œå®è´µå·¥ä½œã€‚


è®¿é—® aerosand.cn ä»¥è·å–æœ€æ–°æ›´æ–°ã€‚


> 
> å¼ºçƒˆå»ºè®®åœ¨å­¦ä¹ è¿‡è®¡ç®—æµä½“åŠ›å­¦åŸºç¡€ä»¥åŠæœ‰é™ä½“ç§¯æ³•ä¹‹åå†å¼€å§‹æœ¬ç³»åˆ—å­¦ä¹ ã€‚è‡³å°‘ä¹Ÿè¦åŒæ—¶å¼€å§‹ï¼Œä¸ç„¶æœ€åå¯èƒ½å¾ˆéš¾ç†è§£ OpenFOAM æ±‚è§£å™¨æ ‡å‡†ç®—æ³•ã€‚

OpenFOAM æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå¼•ç”¨ wiki è§£é‡Šå¦‚ä¸‹

> OpenFOAM (for "Open-source Field Operation And Manipulation") is a C++ toolbox for the development of customized numerical solvers, and pre-/post-processing utilities for the solution of continuum mechanics problems, most prominently including computational fluid dynamics (CFD).

æˆ‘ä»¬ä»ç®€å•çš„ C++ ç¨‹åºå®ç°å¼€å§‹ï¼Œç®€å•äº†è§£ç¼–è¯‘åŸç†ï¼Œé€šè¿‡ makefile é€æ¸æŒæ§æˆ‘ä»¬çš„é¡¹ç›®ï¼Œè¿‡æ¸¡åˆ°äº†è§£ OpenFOAM çš„ Make å®ç°æ–¹å¼ï¼Œç„¶åè®¤è¯† OpenFOAM çš„åŸºæœ¬ç¨‹åºï¼Œæœ€åé€æ¸æ·±å…¥ OpenFOAM çš„ç¨‹åºå¼€å‘ã€‚

é‰´äº OpenFOAM çš„ä½¿ç”¨ç¯å¢ƒï¼Œæˆ‘ä»¬é€‰æ‹©åœ¨ ubuntu 24.04 ç³»ç»Ÿç¯å¢ƒä¸­ï¼ŒåŸºäº OpenFOAM 2406 ç‰ˆæœ¬è¿›è¡Œå¼€å‘ï¼Œæ–¹ä¾¿èµ·è§ä½¿ç”¨ vscode å·¥å…·ã€‚

> OpenFOAM çš„å®‰è£…ï¼Œvscode çš„å®‰è£…ï¼Œå¿«æ·å‘½ä»¤çš„è‡ªå®šä¹‰ç­‰è®¨è®ºå‚è§ [OpenFOAM ç¯å¢ƒå‡†å¤‡ | ğ“ğ“®ğ“»ğ“¸ğ“¼ğ“ªğ“·ğ“­ (aerosand.cn)](https://aerosand.cn/posts/20230331145640/)

## åŸç”Ÿå®ç°

æˆ‘ä»¬ä½¿ç”¨ C++ å†™ä¸€æ®µç®€å•çš„ â€œhello worldâ€ ç¨‹åºã€‚
### hello world

> å¯¹äº OpenFOAM æ¥è¯´ï¼Œä¸ç®¡æ˜¯æ±‚è§£å™¨è¿˜æ˜¯ç®—ä¾‹ï¼Œæ”¾åœ¨ä»»ä½•ä¸€ä¸ªæ–‡ä»¶å¤¹éƒ½å¯ä»¥ã€‚æ”¾åœ¨ `$FOAM_RUN` è·¯å¾„ä¸‹ä¹Ÿæ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†ã€‚
> 
> æ¯”å¦‚ï¼Œæ­¤ç³»åˆ—è®¨è®ºä¸­ï¼Œæˆ‘ä»¬æŠŠé¡¹ç›®æ”¾åœ¨è‡ªå»ºæ–‡ä»¶å¤¹ `/userPath/ofsp` ä¹‹ä¸‹ï¼ˆ`/userPath/` å³ç”¨æˆ·è‡ªå®šä¹‰çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼Œç”¨æˆ·æ›¿æ¢æˆè‡ªå·±çš„è·¯å¾„ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰å¿«æ·å‘½ä»¤ `ofsp` å¿«é€Ÿè·³è½¬åˆ°è¯¥è·¯å¾„ä¸‹ã€‚å¿«æ·å‘½ä»¤çš„è‡ªå®šä¹‰ä½¿ç”¨è¯·å‚è€ƒ [OpenFOAM ç¯å¢ƒå‡†å¤‡ | ğ“ğ“®ğ“»ğ“¸ğ“¼ğ“ªğ“·ğ“­ (aerosand.cn)](https://aerosand.cn/posts/20230331145640/)  
> 
> æˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹çº¦å®š
> - `userPath/`ï¼šç”¨æˆ·æŒ‡å®šè·¯å¾„ï¼Œè¯¥è·¯å¾„ä¸‹å†æ–°å»ºä¾‹å¦‚ `userPath/ofsp/` æ–‡ä»¶å¤¹ï¼Œ`ofsp/` ä¸‹å†æ–°å»ºå„ä¸ªé¡¹ç›®
> - `userProject/`ï¼šç”¨æˆ·æŒ‡å®šé¡¹ç›®è·¯å¾„ï¼Œåœ¨ `userPath/ofsp/userProject/` æ–‡ä»¶ä¸‹å­˜æ”¾å…·ä½“çš„é¡¹ç›®æ–‡ä»¶


ä¾‹å¦‚ï¼Œæ–°å»ºæ€»é¡¹ç›®æ–‡ä»¶å¤¹ï¼ˆ`// terminal` è¡¨ç¤ºä¸‹é¢å‘½ä»¤éœ€è¦åœ¨ç»ˆç«¯è¾“å…¥æ‰§è¡Œï¼‰

```
// terminal
cd /userPath/ofsp
ofsp
```

> `ofsp` å³ `OpenFoam sharing programming` çš„ç¼©å†™

åœ¨ç”¨æˆ·è·¯å¾„ä¸‹ï¼Œå»ºç«‹æœ¬ç« èŠ‚çš„é¡¹ç›®æ–‡ä»¶å¤¹ã€‚

è¯¦ç»†ç»ˆç«¯å‘½ä»¤æ¼”ç¤ºå¦‚ä¸‹

```
// terminal
ofsp
mkdir ofsp_00_helloWorld_cpp
code ofsp_00_helloWorld_cpp
```

é€šè¿‡ vscode æ‰“å¼€é¡¹ç›®åï¼Œå¯ä»¥ä½¿ç”¨ `ctrl + ~` å”¤å‡º vscode çš„ç»ˆç«¯æ§åˆ¶å°ï¼Œå¿«æ·è¿›è¡Œå‘½ä»¤æ“ä½œã€‚

ç»ˆç«¯ä¸­ä½¿ç”¨å‘½ä»¤æ–°å»ºæ–‡ä»¶

```termianl
// terminal
code main.cpp Aerosand.cpp Aerosand.h
```

ç»ˆç«¯ä¸­å¯ä»¥ä½¿ç”¨ `tree` å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶æ ‘çŠ¶ç»“æ„ï¼ˆå‘½ä»¤å‚è€ƒ [OpenFOAM å¸¸ç”¨æŒ‡ä»¤ | ğ“ğ“®ğ“»ğ“¸ğ“¼ğ“ªğ“·ğ“­ (aerosand.cn)](https://aerosand.cn/posts/20230331173234/)ï¼‰

æœ€åï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°æ–‡ä»¶ç»“æ„ä¸º

```
ofsp_00_helloWorld_cpp/
â”œâ”€â”€ Aerosand.cpp
â”œâ”€â”€ Aerosand.h
â””â”€â”€ main.cpp
```

> æˆ‘ä»¬çº¦å®šåœ¨æ–‡ä»¶è¡¨ç¤ºä¸­ï¼Œåç§°ååŠ äº† `/` çš„è¡¨ç¤ºæ–‡ä»¶å¤¹ï¼Œæ²¡æœ‰çš„è¡¨ç¤ºæ–‡ä»¶ã€‚

æˆ‘ä»¬åˆ†åˆ«å†™å…¥ç¤ºä¾‹ä»£ç ï¼Œå†…å®¹å¦‚ä¸‹

ç±»çš„å£°æ˜ `Aerosand.h`

```C++
// Aerosand.h

#pragma once

class Aerosand
{
public:
    void SetLocalTime(double t);
    double GetLocalTime() const;


private:
    double localTime_;
};

```

> ä»£ç é£æ ¼ï¼š  
> 
> æœ¬ç³»åˆ—è®¨è®ºçš„ä»£ç å°½é‡è´´è¿‘ OpenFOAM çš„ä»£ç é£æ ¼ï¼Œæ¯”å¦‚ç§æœ‰æˆå‘˜å˜é‡åç§°å°¾ç¼€ä¸‹åˆ’çº¿ã€‚

ç±»çš„å®šä¹‰ `Aerosand.cpp`

```C++
// Aerosand.cpp

#include "Aerosand.h"

void Aerosand::SetLocalTime(double t) {
    localTime_ = t;
}

double Aerosand::GetLocalTime() const {
    return localTime_;
}

```

ä¸»æºç  `main.cpp`

```Cpp
// main.cpp

#include <iostream>

#include "Aerosand.h"

using namespace std;

int main()
{
    int a = 1;
    double pi = 3.1415926;

    cout << "Hi, OpenFOAM!" << " Here we are." << endl;
    cout << a << " + " << pi << " = " << a + pi << endl;
    cout << a << " * " << pi << " = " << a * pi << endl;


    Aerosand mySolver;
    mySolver.SetLocalTime(0.2);
    cout << "\nCurrent time step is : " << mySolver.GetLocalTime() << endl;

    return 0;
}
```


è™½ç„¶æˆ‘ä»¬ç¬¼ç»Ÿçš„æŠŠä»£ç åˆ°ç¨‹åºçš„æ•´ä¸ªè¿‡ç¨‹ç§°ä¸ºâ€œç¼–è¯‘â€ï¼Œå®é™…ä¸Šï¼Œåœ¨ Linux ç³»ç»Ÿä¸‹ï¼ŒC++ ç¨‹åºçš„ç¼–è¯‘è¿‡ç¨‹åˆ†ä¸ºå››ä¸ªè¿‡ç¨‹ã€‚

```
é¢„å¤„ç† -> ç¼–è¯‘ -> æ±‡ç¼– -> é“¾æ¥
```

æˆ‘ä»¬å°†é€æ­¥æ‹†è§£å¹¶å®ç°å„ä¸ªç¯èŠ‚ã€‚

### é¢„å¤„ç†

å°†ç¨‹åºä»£ç ä¸­åŒ…å«çš„ `#include` æ–‡ä»¶æ’å…¥æ›¿æ¢åˆ°åŸæ–‡ä»¶ä¸­ï¼Œåœ¨ Linux ç³»ç»Ÿä¸‹ç”Ÿæˆ**ä¸­é—´é¢„å¤„ç†è¾“å‡ºæ–‡ä»¶**ï¼ˆåç¼€ `.i` æ–‡ä»¶ï¼‰ã€‚

æˆ‘ä»¬åœ¨ç»ˆç«¯é‡Œé€šè¿‡å‘½ä»¤æ‰§è¡Œè¿™ä¸€è¿‡ç¨‹

```
// terminal 
g++ -E Aerosand.cpp -o Aerosand.i
g++ -E main.cpp -o main.i
```

> - g++ çš„ `-E` æ ‡è¯†æŒ‡å®šç¼–è¯‘å™¨è¿›è¡Œé¢„å¤„ç†
> - g++ çš„ `-o` ï¼ˆå°å†™ï¼‰æ ‡è¯†æŒ‡å®šç¼–è¯‘å™¨ç”Ÿæˆæ–‡ä»¶çš„åç§°

ç»“æœç”Ÿæˆ `Aerosand.i` å’Œ `main.i` æ–‡ä»¶ã€‚

> åç¼€ `.i` è¡¨ç¤º intermediate preprocessor output ä¸­é—´é¢„å¤„ç†è¾“å‡º

### ç¼–è¯‘

ç¼–è¯‘å™¨å¯¹é¢„å¤„ç†åçš„**ä¸­é—´é¢„å¤„ç†è¾“å‡ºæ–‡ä»¶**è¿›ä¸€æ­¥è¯­æ³•åˆ†æï¼Œåœ¨ Linux ç³»ç»Ÿä¸‹ç”Ÿæˆ**æ±‡ç¼–è¯­è¨€å½¢å¼çš„æºæ–‡ä»¶**ï¼ˆåç¼€ `.s` æ–‡ä»¶ï¼‰ã€‚

ç»ˆç«¯ä¸­æ‰§è¡Œç¼–è¯‘è¿‡ç¨‹

```
// terminal
g++ -S Aerosand.i -o Aerosand.s
g++ -S main.i -o main.s
```

> g++ çš„ `-S` æ ‡è¯†æŒ‡å®šç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘ï¼ˆå¤§å†™ `S` ï¼‰

ç»“æœç”Ÿæˆ `Aerosand.s` å’Œ `main.s` æ–‡ä»¶ã€‚

> åç¼€ `.s` ï¼ˆå°å†™ï¼‰è¡¨ç¤º source code written in assembly æ±‡ç¼–è¯­è¨€å½¢å¼çš„æºæ–‡ä»¶

### æ±‡ç¼–

ç¼–è¯‘å™¨æŠŠç¼–è¯‘åçš„**æ±‡ç¼–è¯­è¨€å½¢å¼çš„æºæ–‡ä»¶**è½¬æ¢æˆ**å¯æ‰§è¡Œæœºå™¨æŒ‡ä»¤**ï¼Œåœ¨ Linux ç³»ç»Ÿä¸‹ç”Ÿæˆ**ç›®æ ‡æ–‡ä»¶**ã€‚

ç»ˆç«¯ä¸­æ‰§è¡Œæ±‡ç¼–è¿‡ç¨‹

```
// termianl
g++ -c Aerosand.s -o Aerosand.o
g++ -c main.s -o main.o
```

> g++ çš„ `-c` ï¼ˆå°å†™ï¼‰æ ‡è¯†æŒ‡å®šç¼–è¯‘å™¨è¿›è¡Œæ±‡ç¼–

ç»“æœç”Ÿæˆ `Aerosand.o` å’Œ `of00_0.o` æ–‡ä»¶ã€‚

> åç¼€ `.o` ï¼ˆå°å†™ï¼‰è¡¨ç¤º object file ç›®æ ‡æ–‡ä»¶

### åŠ¨æ€åº“

å½“é¡¹ç›®ä¸­æœ‰å¤§é‡â€œç±»â€çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¸Œæœ›æŸäº›â€œç±»â€èƒ½å›ºå®šä¸‹æ¥æä¾›æŸç§â€œæ–¹æ³•â€ï¼Œè¿™ç§â€œæ–¹æ³•â€å°±å½¢æˆä¸€ä¸ªå¯ä»¥é‡å¤ä½¿ç”¨çš„â€œåº“â€ï¼ˆlibraryï¼‰ã€‚å½“å…¶ä»–é¡¹ç›®ä½¿ç”¨è¿™ä¸ªåº“çš„æ—¶å€™ï¼Œåº“æœ¬èº«æ— éœ€å†æ¬¡â€œé¢„å¤„ç†â€ï¼Œâ€œç¼–è¯‘â€ä»¥åŠâ€œæ±‡ç¼–â€ï¼Œä»…ä»…å’Œè¿™ä¸ªé¡¹ç›®é“¾æ¥å³å¯ã€‚

å› ä¸ºé™æ€åº“å¼€é”€å¤§ï¼Œæµªè´¹ç©ºé—´ï¼Œæ›´æ–°ç»´æŠ¤å›°éš¾ï¼Œæ‰€ä»¥ OpenFOAM å¤§é‡ä½¿ç”¨åŠ¨æ€åº“ï¼Œæˆ‘ä»¬è¿™é‡Œä¹Ÿåªä»¥åŠ¨æ€åº“ä¸ºä¾‹ã€‚

åŠ¨æ€åº“åœ¨**ç¨‹åºç¼–è¯‘**æ—¶å¹¶ä¸é“¾æ¥åˆ°ç›®æ ‡ä»£ç ï¼Œè€Œä»…ä»…åœ¨**ç¨‹åºè¿è¡Œ**æ—¶æ‰è¢«é“¾æ¥è½½å…¥ã€‚ä¸åŒçš„ç¨‹åºå¦‚æœè°ƒç”¨ç›¸åŒçš„åº“ï¼Œé‚£ä¹ˆå†…å­˜é‡Œåªéœ€è¦ä¸€ä»½è¯¥åŠ¨æ€åº“çš„å¯åˆ†äº«å®ä¾‹ï¼Œè¿™æ ·å°±å¤§å¤§å‡å°‘äº†ç©ºé—´æµªè´¹ã€‚æ­¤å¤–ï¼Œå› ä¸ºåŠ¨æ€åº“ä»…åœ¨ç¨‹åºè¿è¡Œæ—¶æ‰è¢«é“¾æ¥è½½å…¥ï¼Œæ‰€ä»¥åº“çš„å•ç‹¬ç»´æŠ¤æ›´æ–°ä¹Ÿååˆ†æ–¹ä¾¿ã€‚

ç¼–è¯‘å™¨å¯ä»¥å¯¹æ±‡ç¼–åçš„ `.o` ç›®æ ‡æ–‡ä»¶è¿›è¡Œæ•´ç†å½¢æˆåŠ¨æ€åº“ï¼Œåœ¨ Linux ç³»ç»Ÿä¸‹ç”Ÿæˆ `.so` æ–‡ä»¶ã€‚

ç»ˆç«¯ä¸­æ‰§è¡Œç”ŸæˆåŠ¨æ€åº“å‘½ä»¤

```
// terminal
g++ -shared -fPIC Aerosand.o -o libAerosand.so
```

> - g++ çš„ `-shared` æ ‡è¯†æŒ‡å®šç”ŸæˆåŠ¨æ€é“¾æ¥åº“
> - g++ çš„ `-fPIC` æ ‡è¯†æŒ‡å®šåˆ›å»ºä¸åœ°å€æ— å…³çš„ç¼–è¯‘ç¨‹åºï¼Œ`f` å³ fileï¼Œ`PIC` å³ position independent code
> - åŠ¨æ€åº“æ–‡ä»¶ä»¥ `lib` å¼€å¤´

ç”Ÿæˆ `Aerosand.so` æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°±æ˜¯å¯é“¾æ¥çš„åŠ¨æ€åº“ã€‚

> åç¼€ `.so` ä»£è¡¨ç€ shared object å…±äº«ç›®æ ‡

### é“¾æ¥

ç¼–è¯‘å™¨æŠŠæ‰€æœ‰çš„ç›®æ ‡æ–‡ä»¶ä»¥åŠåº“æ–‡ä»¶éƒ½ç»„ç»‡æˆä¸€ä¸ªå¯ä»¥æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

ä½¿ç”¨ `echo` å‘½ä»¤æŸ¥çœ‹åŸæœ¬åŠ¨æ€åº“é“¾æ¥è·¯å¾„ï¼Œå¯ä»¥å‘ç°å¹¶ä¸æ˜¯é¡¹ç›®æœ¬åœ°è·¯å¾„ã€‚ä¸´æ—¶æŒ‡å®šåŠ¨æ€åº“è·¯å¾„ä¸ºå½“å‰æ–‡ä»¶å¤¹ï¼ˆä¸è¦æ‹…å¿ƒï¼Œä¸´æ—¶æŒ‡å®šä¸å½±å“ OpenFOAM åŠ¨æ€åº“è·¯å¾„çš„ç¯å¢ƒé…ç½®ï¼‰ã€‚

```
// terminal
echo $LD_LIBRARY_PATH

export LD_LIBRARY_PATH=.
```

ç»ˆç«¯ä¸­å°†ä¸»æºç ç›®æ ‡æ–‡ä»¶å’ŒåŠ¨æ€åº“é“¾æ¥ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶

```
// terminal
g++ main.o -L. -lAerosand -o main
```

> - g++ çš„ `-L` æ ‡è¯†ç´§è·ŸæŒ‡å®šçš„åº“çš„è·¯å¾„ï¼Œ ä½¿ç”¨ `-L.` è¡¨ç¤ºåŠ¨æ€åº“åœ¨å½“å‰è·¯å¾„
> - g++ çš„ `-l` æ ‡è¯†ç´§è·ŸæŒ‡å®šçš„åº“çš„åç§°ï¼Œä½¿ç”¨æ—¶çœç•¥ `lib` å­—æ®µ

æœ€ç»ˆç”Ÿæˆ `main` å¯æ‰§è¡Œç¨‹åºã€‚

> æ³¨æ„ï¼Œä¸Šé¢æŒ‡å®šçš„åŠ¨æ€åº“è·¯å¾„æ˜¯ä¸´æ—¶çš„ï¼Œå¦‚æœé‡å¯è®¡ç®—æœºï¼Œæƒ³è¦å†æ¬¡è¿è¡Œ `main` ç¨‹åºï¼Œå¿…é¡»è¦å†æ¬¡æŒ‡å®šåŠ¨æ€åº“è·¯å¾„ã€‚

éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œæ— è®ºæ˜¯æŠŠæ–°å¼€å‘çš„åº“æ”¾åœ¨æœ¬é¡¹ç›®ä¸‹ï¼Œæˆ–æ˜¯å…¶ä»–ç‰¹å®šè·¯å¾„ä¸‹ï¼Œæ¯ä¸ªé¡¹ç›®éƒ½å¯ä»¥é“¾æ¥ä½¿ç”¨è¿™ä¸ªåŠ¨æ€åº“ï¼Œåªè¦æŒ‡å®šæ­£ç¡®çš„é“¾æ¥è·¯å¾„ã€‚è¿™ä¹Ÿæ˜¯åŠ¨æ€åº“â€œç›¸å¯¹ç‹¬ç«‹â€â€œè‡ªç”±é“¾æ¥â€çš„æ„ä¹‰æ‰€åœ¨ã€‚

### è¿è¡Œ

æ€»ç»“æ•´ä¸ªè¿‡ç¨‹å¦‚ä¸‹

![](https://raw.githubusercontent.com/Aerosand/picgo/main/img/cpp_compile.png)

è¿è¡Œè¯¥å…ˆé¡¹ç›®

```
// terminal
./main
```

è¿è¡Œç»“æœä¸º

```
Hi, OpenFOAM! Here we are.
1 + 3.14159 = 4.14159
1 * 3.14159 = 3.14159

Current time step is : 0.2
```

## make å®ç°

ä¸Šä¸€èŠ‚çš„ç¼–è¯‘è¿‡ç¨‹è™½ç„¶æ¸…æ™°ï¼Œä½†æ˜¯ä¸€æ­¥ä¸€æ­¥çš„æ‰§è¡Œååˆ†ç¹çã€‚

ä¸ºäº†ç®€åŒ–é¡¹ç›®ç¼–è¯‘ï¼Œä»¥åŠå…¼é¡¾ç†è§£ç¼–è¯‘ç»†èŠ‚ï¼Œæˆ‘ä»¬é‡‡ç”¨ make å·¥å…·æ¥ç®¡ç†æˆ‘ä»¬çš„å¼€å‘é¡¹ç›®ã€‚å¾ˆå¤šäººä¹Ÿä¼šä½¿ç”¨ cmake æ¥æ„å»ºé¡¹ç›®ï¼Œcmake æ›´åŠ ç®€æ´é«˜æ•ˆï¼Œä¸è¿‡æœ¬è´¨ä¸Šä¹Ÿæ˜¯åŸºäº makefile çš„ã€‚

æˆ‘ä»¬å¯ä»¥ä¸ºé¡¹ç›®æä¾› makefile æ–‡ä»¶é€šç”¨çš„æè¿°æ‰€æœ‰æ‰§è¡Œæ­¥éª¤ã€‚è¿™æ ·åªéœ€è¦ç®€å•æ‰§è¡Œ makefile æ–‡ä»¶å°±å¯ä»¥ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ï¼Œå¤§å¤§æ–¹ä¾¿è°ƒè¯•è¿è¡Œã€‚æ­¤å¤–ï¼Œä¸Šé¢é¡¹ç›®çš„æ‰€æœ‰ä»£ç æ–‡ä»¶éƒ½æ”¾åœ¨ä¸€èµ·ï¼Œååˆ†ä¸æ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹ä»£ç è¿›è¡Œåˆ†ç±»ç®¡ç†ã€‚

### é¡¹ç›®å‡†å¤‡

æˆ‘ä»¬å»ºç«‹æ–°é¡¹ç›® `ofsp_00_helloWorld_make`ï¼Œ

```terminal
// termianl
ofsp
mkdir ofsp_00_helloWorld_make
code ofsp_00_helloWorld_make
```

æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

```
ofsp_00_helloWorld_make/
â”œâ”€â”€ Aerosand/
â”‚Â Â  â”œâ”€â”€ Aerosand.cpp
â”‚Â Â  â”œâ”€â”€ Aerosand.h
â”‚Â Â  â””â”€â”€ makefile
â”œâ”€â”€ makefile
â”œâ”€â”€ ofsp_00_helloWorld_make
â””â”€â”€ ofsp_00_helloWorld_make.cpp

```

åœ¨æˆ‘ä»¬æ—©æœŸå¼€å‘çš„å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¼€å‘çš„åº“åªæ˜¯æŸä¸ªé¡¹ç›®çš„ç‰¹å®šåº“ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä»ç„¶æŠŠåŒ…å«ä¼—å¤š `ç±»` å½¢æˆçš„ `å¼€å‘åº“` ä½œä¸ºä¸€ä¸ªæ–‡ä»¶å¤¹æ”¾è¿›å¼€å‘é¡¹ç›®å†…ã€‚é¡¹ç›®æ ¹ç›®å½•ä¸‹æœ‰é¡¹ç›®ä¸»æºç ï¼Œ é¡¹ç›®çš„ `é¡¹ç›® makefile` ï¼Œä»¥åŠå¼€å‘åº“æ–‡ä»¶å¤¹ã€‚å¼€å‘åº“æ–‡ä»¶å¤¹å†…æœ‰åº“è‡ªå·±çš„ `åº“ makefile`ã€‚æ–‡ä»¶ç»“æ„æ¸…æ™°ï¼Œå±‚æ¬¡æ˜ç¡®ã€‚

å› ä¸ºå¤´æ–‡ä»¶è·¯å¾„æœ‰å˜åŒ–ï¼Œä¸»æºç å¤´æ–‡ä»¶åŒ…å«ä¿®æ”¹ä¸º 

```cpp
#include "Aerosand/Aerosand.h"
```

å…¶ä»–ä»£ç çš„å†…å®¹ä¿æŒä¸å˜ã€‚

### åº“ makefile

åº“çš„ makefile åªè´Ÿè´£åº“çš„ç¼–è¯‘ï¼Œç›®çš„æ˜¯å¾—åˆ°åŠ¨æ€åº“ï¼Œæ–¹ä¾¿ä¸»ç¨‹åºé“¾æ¥ä½¿ç”¨ã€‚

makefile æ–‡ä»¶å°†ç¼–è¯‘è¿‡ç¨‹ç®€åŒ–æˆâ€œç¼–è¯‘â€å’Œâ€œé“¾æ¥â€ä¸¤éƒ¨åˆ†ï¼Œä¸å†å±•å¼€â€œé¢„å¤„ç†â€ï¼Œâ€œæ±‡ç¼–â€çš„è¿‡ç¨‹ã€‚ç¼–è¯‘è¿‡ç¨‹æŠŠæºä»£ç ç¼–è¯‘æˆ `.o` ç›®æ ‡æ–‡ä»¶æˆ–è€…åº“æ–‡ä»¶ç­‰ä¸­é—´æ–‡ä»¶ï¼Œâ€œé“¾æ¥â€è¿‡ç¨‹æŠŠä¸­é—´æ–‡ä»¶é“¾æ¥æˆæœ€åå¯æ‰§è¡Œç¨‹åºã€‚

makefile æ–‡ä»¶çš„åŸºæœ¬æ ¼å¼ä¸º

```makefile
<target>:  <support>
	<command>
```

åŸºäºå‰æ–‡å¯¹ C++ é¡¹ç›®ç¼–è¯‘åŸç†çš„è¿‡ç¨‹çš„è®¨è®ºï¼Œåº“ makefile å¯ä»¥éå¸¸ç›´ç™½çš„å†™æˆ

```makefile
libAerosand.so: Aerosand.o
	g++ -shared -fPIC Aerosand.o -o libAerosand.so 

Aerosand.o: Aerosand.cpp
	g++ -c -fPIC Aerosand.cpp -o Aerosand.o

```

> - é¡ºåºé‡è¦ã€‚å…ˆæŒ‡å®šåŠ¨æ€åº“çš„ç¼–è¯‘ï¼Œå†æŒ‡å®šæ±‡ç¼– `.o` æ–‡ä»¶çš„ç¼–è¯‘ã€‚
> - `<support>` éƒ¨åˆ†ä¸åŒ…æ‹¬ `.h` æ–‡ä»¶

è¿›å…¥åº“æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ makefile

```
// terminal
cd Aerosand
make
```

> æ¸…ç†çš„æ—¶å€™è‡ªè¡Œåˆ é™¤ `.o` æ–‡ä»¶å’Œ `.so` æ–‡ä»¶å³å¯ã€‚

å¯ä»¥çœ‹åˆ°åº“æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆäº†æˆ‘ä»¬éœ€è¦çš„ `libAerosand.so` æ–‡ä»¶ã€‚

å½“ä»£ç æ–‡ä»¶ç¹å¤šçš„æ—¶å€™ï¼Œè¿™ä¹ˆç›´ç™½çš„å†™ makefile æ•ˆç‡ä½ï¼Œä¸åˆ©äºç»´æŠ¤ï¼Œæˆ‘ä»¬ä¼˜åŒ– makefile å†™æ³•åˆ°é€šç”¨å½¢å¼

```makefile
# MACRO

CXX         := g++
CXXFLAGS    := -std=c++17 -Wall -Wextra -g -c
LDFLAGS     := -shared -fPIC

NAME        := $(shell basename $(CURDIR))
SOURCES     := $(wildcard *.cpp)
TARGET      := lib$(NAME).so
OBJECTS     := $(NAME).o

# compile
$(TARGET): $(OBJECTS)
	$(CXX) $(LDFLAGS) $(OBJECTS) -o $(TARGET)

$(OBJECTS): $(SOURCES)
	$(CXX) $(CXXFLAGS) $(SOURCES) -o $(OBJECTS)

# make clean
clean:
	rm -rf *.so
	rm -rf *.o
```

> å¸Œæœ›è¯»è€…ä¸è¦å¯¹ makefile çš„å†™æ³•æ„Ÿåˆ°æ‹…å¿ƒï¼Œéœ€è¦çŸ¥é“çš„éƒ½å†™åœ¨æœ¬æ–‡é‡Œäº†ï¼Œé™Œç”Ÿçš„è¯­æ³•çŸ¥é“å¯ä»¥è¿™ä¹ˆä½¿ç”¨å³å¯ï¼Œä¸éœ€è¦èŠ±è´¹æ—¶é—´äº†è§£åŸå› å’ŒåŸç†ã€‚  
> 
> ç»™å‡ºå¿…è¦çš„è§£é‡Šå¦‚ä¸‹ï¼š
>   
> ç¬¬ä¸€æ®µå®šä¹‰äº†ä¸€äº›å‘½ä»¤çš„å®å˜é‡ï¼Œæ–¹ä¾¿ç¬¬äºŒæ®µå‘½ä»¤çš„ä¹¦å†™ã€‚æ³¨æ„è·å–å½“å‰æ–‡ä»¶å¤¹åç§° `NAME` çš„å†™æ³•ï¼Œè·å–å½“å‰è·¯å¾„ä¸‹æ‰€æœ‰æºæ–‡ä»¶ `SOURCE` çš„å†™æ³•ã€‚
> 
> ç¬¬äºŒæ®µä½¿ç”¨å®å˜é‡å†™äº†ç¼–è¯‘å‘½ä»¤ï¼Œæœ¬è´¨ä¸Šå’ŒåŸç”Ÿå†™æ³•æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚
> 
> ç¬¬ä¸‰æ®µè‡ªå®šä¹‰äº† `make clean` å‘½ä»¤ã€‚æ³¨æ„ `Linux` ç³»ç»Ÿä¸‹å¸¸è§çš„ç±»ä¼¼å†™æ³•ï¼Œä¾‹å¦‚ `*.so` æŒ‡ä»£æ‰€æœ‰çš„ `.so` æ–‡ä»¶ã€‚

åŠ¨æ€åº“ç¼–è¯‘ï¼ˆç¡®è®¤åœ¨åº“è·¯å¾„ä¸‹ï¼‰

```
// terminal
pwd
make clean
make
```

ç»“æœç”Ÿæˆäº†åŠ¨æ€åº“ `.../ofsp/ofsp_00_helloWorld_make/Aerosand/libAerosand.so` æ–‡ä»¶ï¼ˆæ³¨æ„è·¯å¾„ï¼‰ã€‚

### é¡¹ç›® makefile

æœ‰äº†ä¸ŠèŠ‚çš„ç»éªŒï¼Œæˆ‘ä»¬ç›´æ¥å†™é¡¹ç›® makefile æ–‡ä»¶

```makefile
# MACRO
CXX         := g++
CXXFLAGS    := -std=c++17 -Wall -Wextra -g
LDFLAGS     := -shared -fPIC

NAME        := $(shell basename $(CURDIR))

# specify the path of library here
DLPATH      := -L./Aerosand -lAerosand

SOURCES     := $(wildcard *.cpp)
OBJECTS     := $(NAME).o

OUTPUT      := $(NAME)


# config library path
export LD_LIBRARY_PATH=./Aerosand

# compile
$(OUTPUT) : $(OBJECTS)
	$(CXX)  $(CXXFLAGS) $(OBJECTS) $(DLPATH) -o $(OUTPUT)

$(OBJECTS) : $(SOURCES)
	$(CXX) $(CXXFLAGS) -c $(SOURCES) -o $(OBJECTS)


# make run
run:
	./$(OUTPUT)

# make clean
clean:
	rm -rf *.so
	rm -rf *.o
```

> å¦‚æœä¸»æºç æ²¡æœ‰å…ˆè¡Œå•ç‹¬çš„ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼Œè€Œæ˜¯é€šè¿‡ `-c` æ ‡è¯†æŠŠç¼–è¯‘å’Œé“¾æ¥æ”¾åœ¨ä¸€å¥æŒ‡ä»¤å†…å†™å®Œï¼Œç¼–è¯‘åçš„æ–‡ä»¶å°†æ— æ³•æ‰§è¡Œï¼Œè¿™æ˜¯å› ä¸º `-c` æ ‡è¯†æŒ‡å®šçš„ç”Ÿæˆæ–‡ä»¶ä¸èƒ½ç›´æ¥è¿è¡Œã€‚

ç¨‹åºç¼–è¯‘ï¼ˆæ³¨æ„è¦ç¦»å¼€åº“æ–‡ä»¶å¤¹ï¼Œ `cd` åˆ°æœ¬é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼‰

```
// terminal
cd ..
make
make run

// if clean
make clean
```

æ³¨æ„ï¼Œmakefile ä¸­çš„ `compile` éƒ¨åˆ†ä¸´æ—¶æŒ‡å®šäº†åŠ¨æ€åº“é“¾æ¥è·¯å¾„ã€‚

è¿è¡Œç»“æœå¦‚ä¸‹

```
Hi, OpenFOAM! Here we are.
1 + 3.14159 = 4.14159
1 * 3.14159 = 3.14159

Current time step is : 0.2
```

### vscode æ’ä»¶

è¿™é‡Œæ’å…¥ä¸€ç‚¹é¢˜å¤–è¯ã€‚

å¯¹äºä¸€èˆ¬çš„ C++ é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ vscode çš„æ’ä»¶ `C/C++ Project Generator`ï¼Œæ“ä½œå’Œå¤‡æ³¨å¦‚ä¸‹

- åŸºäº makefile çš„å¤šæ–‡ä»¶é¡¹ç›®æ¨¡ç‰ˆ
- ä½¿ç”¨ `F1` æ‰“å¼€å¿«æ·å‘½ä»¤è¾“å…¥ï¼Œä½¿ç”¨ `Create C++ project`
- å¼¹å‡ºçª—å£ä¸­é€‰æ‹©åˆ°å‡†å¤‡å¥½çš„ç©ºç™½é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¹¶æ‰“å¼€
- åœ¨ `src/main.cpp` ä¸­å¼€å‘ä¸»å‡½æ•°ä»£ç 
- åœ¨ `include/` è·¯å¾„ä¸‹å¼€å‘å¤´æ–‡ä»¶çš„å®šä¹‰ï¼Œåœ¨ `src/` è·¯å¾„ä¸‹å¼€å‘å¤´æ–‡ä»¶çš„å®ç°
- ç»ˆç«¯ä½¿ç”¨å‘½ä»¤ `make` ç¼–è¯‘æ­¤é¡¹ç›®ï¼Œ`make run` ç¼–è¯‘å¹¶è¿è¡Œï¼Œ`make clean` æ¸…ç†é¡¹ç›®
- ä¹Ÿå¯ä»¥ä½¿ç”¨ `./output/main` ç›´æ¥è¿è¡Œè¯¥ä¸»ç¨‹åº

ä¹Ÿå¯ä»¥ä½¿ç”¨ vscode çš„æ’ä»¶ `c cpp cmake project`ï¼Œæ“ä½œå’Œå¤‡æ³¨å¦‚ä¸‹

- åŸºäº `CMakeList` çš„å¤šæ–‡ä»¶é¡¹ç›®æ¨¡æ¿
- ä½¿ç”¨ `F1` æ‰“å¼€å¿«æ·å‘½ä»¤è¾“å…¥ï¼Œä½¿ç”¨ `CMake Project: Create Project`
- å¼¹å‡ºçª—å£ä¸­é€‰æ‹©åˆ°å‡†å¤‡å¥½çš„ç©ºç™½é¡¹ç›®æ–‡ä»¶å¤¹ï¼Œå¹¶æ‰“å¼€
- åœ¨ `src/main.cpp` ä¸­å¼€å‘ä¸»å‡½æ•°ä»£ç 
- åœ¨ `include/` è·¯å¾„ä¸‹å¼€å‘å¤´æ–‡ä»¶çš„å®šä¹‰ï¼Œåœ¨ `src/` è·¯å¾„ä¸‹å¼€å‘å¤´æ–‡ä»¶çš„å®ç°
- ç»ˆç«¯ä½¿ç”¨å‘½ä»¤ `cmake -B build/` è¿›è¡Œé¡¹ç›®ç¼–è¯‘
- ç»ˆç«¯ä½¿ç”¨å‘½ä»¤ `make -C build/` è¿›è¡Œé¡¹ç›®æœ€åç¼–è¯‘
- ç»ˆç«¯ä½¿ç”¨å‘½ä»¤ `./build/xxx` è¿è¡Œè¯¥ä¸»ç¨‹åº

## wmake å®ç°


åœ¨ç†è§£äº† C++ é¡¹ç›®çš„ `make` å®ç°æ–¹å¼ä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ›´åŠ å®¹æ˜“çš„æ˜ç™½ OpenFOAM æä¾›çš„ `wmake` å®ç°æ–¹å¼ã€‚

å¯ä»¥æ‰¾åˆ° OpenFOAM çš„ `wmake` æ–‡ä»¶å¤¹ã€‚

```
// terminal
cd $WM_PROJECT_DIR/wmake
```

å¤§æ¦‚æ‰«ä¸€çœ¼æ–‡ä»¶æ„æˆï¼Œç®€å•æ¥è¯´ï¼Œ OpenFOAM ä½¿ç”¨ `wmake` ç®¡ç†åº”ç”¨ï¼Œ`wmake` æ˜¯åŸºäº `make` çš„ä¸€ä¸ªè„šæœ¬ï¼Œä½†æ˜¯æä¾›äº†é’ˆå¯¹ OpenFOAM çš„ç‰¹æ€§ã€‚

OpenFOAM ä½¿ç”¨ `Make/files` å’Œ `Make/options` å®ç° `wmake` çš„ç¼–è¯‘ç®¡ç†ï¼Œä¸‹é¢æˆ‘ä»¬å…·ä½“ä½¿ç”¨ä¸€ä¸‹å°±ä¼šæ˜ç™½ã€‚

OpenFOAM çº¦å®šæºæ–‡ä»¶åç¼€ä¸º `.C`ï¼Œå¤´æ–‡ä»¶åç¼€ä¸º `.H` ã€‚ä¸ºäº†è®©è¯»è€…ä¸è¦å¯¹æ–‡ä»¶æ¶æ„æ„Ÿåˆ°å›°æ‰°ï¼Œè¿™é‡Œä½œäº†ä¸ä¸¥è°¨çš„åŒºåˆ†ã€‚OpenFOAM â€œ**åº”ç”¨å±‚é¢**â€ çš„ `.H` æ–‡ä»¶æ›´å¤šåªæ˜¯ä¸ºäº†å¯¹ä¸»æºç æŒ‰åŠŸèƒ½è¿›è¡Œæ‹†åˆ†ï¼Œæ–¹ä¾¿ä»£ç é˜…è¯»å’Œç»´æŠ¤ï¼Œå¾ˆå¤šå¹¶ä¸æ˜¯ç±»çš„å¤´æ–‡ä»¶ã€‚è¿™å’Œ C++ å¼€å‘å±‚é¢çš„å¤´æ–‡ä»¶ä»¥åŠ OpenFOAM â€œ**æºç å±‚é¢**â€çš„å¤´æ–‡ä»¶ï¼ˆå¦‚ `$FOAM_SRC/OpenFOAM/dimensionSet.H`ï¼‰æœ‰äº›ä¸åŒã€‚

æœ¬æ–‡ä¸‹é¢è®¨è®ºçš„éƒ½æ˜¯â€œæºç å±‚é¢â€çš„å¤´æ–‡ä»¶ï¼Œæš‚æ— â€œåº”ç”¨å±‚é¢â€çš„å¤´æ–‡ä»¶ã€‚

### é¡¹ç›®å‡†å¤‡

> OpenFOAM ä¸­ï¼Œåº”ç”¨ï¼ˆapplicationï¼‰åŒ…æ‹¬
> 
> - æ±‚è§£å™¨ï¼ˆsolversï¼‰
> - å·¥å…·ï¼ˆtoolsï¼‰
> - å®ç”¨ç¨‹åºï¼ˆutilitiesï¼‰
> 
> åœ¨æœ¬ç³»åˆ—è®¨è®ºä¸­ï¼Œæˆ‘ä»¬æ‰€è¯´çš„ â€œé¡¹ç›®â€ æ˜¯å®Œæ•´è§£å†³æŸä¸ªé—®é¢˜çš„æ‰€æœ‰å†…å®¹ï¼ŒåŒ…æ‹¬
> 
> - æ±‚è§£å™¨
> - è°ƒè¯•ç®—ä¾‹
> - è°ƒç”¨åº“
> - å·¥å…·
> - å®ç”¨ç¨‹åº
> - ç­‰ç­‰

å»ºç«‹åº”ç”¨ï¼ˆapplicationï¼‰`.../ofsp/ofsp_00_helloWorld_wmake` ã€‚è¿›å…¥è¯¥æ–‡ä»¶å¤¹ï¼Œå†™å…¥æºä»£ç ã€‚

```terminal
// terminal
ofsp
mkdir ofsp_00_helloWorld_wmake
```

å…ˆè¡Œç»™å‡ºä»£ç å†…å®¹å¦‚ä¸‹ï¼š

Aerosand åº“å¤´æ–‡ä»¶

```cpp
// Aerosand.H

#pragma once

class Aerosand
{
public:
    void SetLocalTime(double t);
    double GetLocalTime() const;


private:
    double localTime_;
};

```

Aerosand åº“æºæ–‡ä»¶

```cpp
// Aerosand.C

#include "Aerosand.H"

void Aerosand::SetLocalTime(double t) {
    localTime_ = t;
}

double Aerosand::GetLocalTime() const {
    return localTime_;
}

```

åº”ç”¨ä¸»æºç 

```cpp
// ofsp_00_helloWorld_wmake.C

#include <iostream>

#include "Aerosand.H"

using namespace std;

int main()
{
    int a = 1;
    double pi = 3.1415926;

    cout << "Hi, OpenFOAM!" << " Here we are." << endl;
    cout << a << " + " << pi << " = " << a + pi << endl;
    cout << a << " * " << pi << " = " << a * pi << endl;


    Aerosand mySolver;
    mySolver.SetLocalTime(0.2);
    cout << "\nCurrent time step is : " << mySolver.GetLocalTime() << endl;

    return 0;
}

```

> - æ³¨æ„æ¯ä¸ªä»£ç æ–‡ä»¶çš„æœ€åéƒ½éœ€è¦ç•™ä¸ªä¸€ä¸ªç©ºç™½è¡Œï¼Œå¦åˆ™ OpenFOAM ä¼šè­¦å‘Š `parse error`
> - ç±»çš„å¤´æ–‡ä»¶ä¸å†éœ€è¦ç›¸å¯¹è·¯å¾„

OpenFOAM æä¾›äº† Make æ–‡ä»¶æ¥å¸®åŠ©å¼€å‘ï¼Œå…¶ä¸­
- `/Make/files` æŒ‡å®šç¼–è¯‘éœ€è¦çš„æ‰€æœ‰æºæ–‡ä»¶å’Œç›®æ ‡è·¯å¾„ä»¥åŠç›®æ ‡æ–‡ä»¶åç§°
- `/Make/options` æŒ‡å®š application æˆ–è€…åº“æ‰€éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶ã€é“¾æ¥çš„å…¶ä»–åº“æ–‡ä»¶ï¼ˆåŒ…å«è·¯å¾„ï¼‰

> ç±»ä¼¼æŠŠ makefile æ–‡ä»¶æ¢æˆäº† OpenFOAM çš„ Make æ–‡ä»¶

### ç¡¬é“¾æ¥

ç¡¬é“¾æ¥å¹¶ä¸éœ€è¦å•ç‹¬ç¼–è¯‘åº“æ–‡ä»¶ï¼Œè€Œæ˜¯å°†åº“æ–‡ä»¶ç›´æ¥åŒ…å«åœ¨ä¸»åº”ç”¨ä¸Šï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸éœ€è¦å‡†å¤‡åº“çš„ Make æ–‡ä»¶ã€‚

ä»£ç æ–‡ä»¶ç»“æ„å¦‚ä¸‹

```
â”œâ”€â”€ ofsp_00_helloWorld_wmake/
â”œâ”€â”€ Aerosand/
â”‚   â”œâ”€â”€ Aerosand.H
â”‚   â””â”€â”€ Aerosand.C
â”œâ”€â”€ Make/
â”‚   â”œâ”€â”€ files
â”‚   â””â”€â”€ options
â””â”€â”€ ofsp_00_helloWorld_wmake.C
```

æ–‡ä»¶ `ofsp_00_helloWorld_wmake/Make/files` å†…å®¹å¦‚ä¸‹

```Make/files
Aerosand/Aerosand.C
ofsp_00_helloWorld_wmake.C

EXE = $(FOAM_USER_APPBIN)/ofsp_00_helloWorld_wmake

```

æ­¤åº”ç”¨éœ€è¦â€œåŒ…æ‹¬â€è‡ªå®šä¹‰åº“ Aerosandã€‚

> è¿™é‡Œç”¨è¯ä½¿ç”¨â€œåŒ…æ‹¬â€è€Œä¸æ˜¯â€œé“¾æ¥â€ï¼Œä¸ºäº†å¼ºè°ƒ Aerosand å¹¶æ²¡æœ‰ç”Ÿæˆè‡ªå·±çš„ç‹¬ç«‹åº“æ–‡ä»¶ï¼ˆå¦‚é™æ€åº“ `.a` æ–‡ä»¶æˆ–è€…åŠ¨æ€åº“ `.so` æ–‡ä»¶ï¼‰

æ–‡ä»¶ `ofsp_00_helloWorld_wmake/Make/options` å†…å®¹å¦‚ä¸‹

```Make/options
EXE_INC = \
	-IAerosand

```

> å› ä¸ºå‰æ–‡ä¸´æ—¶å®šä¹‰äº†åº“çš„é“¾æ¥è·¯å¾„ï¼Œè¿™é‡Œéœ€è¦å¯èƒ½é‡å¯ç»ˆç«¯ï¼Œä»¥æ¢å¤ OpenFOAM çš„ç¯å¢ƒé…ç½®ã€‚

æ‰§è¡Œç¼–è¯‘

```
// terminal 
wclean
wmake
```

ç»ˆç«¯è¾“å‡ºä¿¡æ¯æœ‰ä¸‰æ®µï¼Œå¯¹åº”ç€åº”ç”¨ç¼–è¯‘çš„ä¸‰ä¸ªè¿‡ç¨‹ã€‚

ç¬¬ä¸€æ®µæ˜¯è‡ªå®šä¹‰çš„ Aerosand åº“ç¼–è¯‘å¾—åˆ°ç›®æ ‡æ–‡ä»¶ `Aerosand.o` ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ï¼‰

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100  -IAerosand 
-iquote. -IlnInclude -I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -c 
Aerosand/Aerosand.C -o Make/linux64GccDPInt32Opt/Aerosand/Aerosand.o
```

ç¬¬äºŒæ®µæ˜¯ä¸»æºç ç¼–è¯‘å¾—åˆ°ç›®æ ‡æ–‡ä»¶ `ofsp_00_helloWorld_wmake.o` ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ï¼‰

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra 
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100  -IAerosand 
-iquote. -IlnInclude -I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -c 
ofsp_00_helloWorld_wmake.C -o Make/linux64GccDPInt32Opt/ofsp_00_helloWorld_wmake.o
```

ç¬¬ä¸‰æ®µæ˜¯é“¾æ¥çš„è¿‡ç¨‹ï¼Œé“¾æ¥è‡ªå®šä¹‰åº“æˆ–è€…å…¶ä»–çš„åŠ¨æ€é“¾æ¥ï¼Œæœ€ç»ˆç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ï¼‰ã€‚

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra 
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100  -IAerosand 
-iquote. -IlnInclude -I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -Xlinker 
--add-needed -Xlinker --no-as-needed  Make/linux64GccDPInt32Opt/Aerosand/Aerosand.o 
Make/linux64GccDPInt32Opt/ofsp_00_helloWorld_wmake.o 
-L/usr/lib/openfoam/openfoam2312/platforms/linux64GccDPInt32Opt/lib \
     -lOpenFOAM -ldl  \
     -lm -o /home/aerosand/OpenFOAM/aerosand-
v2312/platforms/linux64GccDPInt32Opt/bin/ofsp_00_helloWorld_wmake
```

ç¼–è¯‘çš„è¿‡ç¨‹æ–‡ä»¶åœ¨ `ofsp_00_helloWorld_wmake/Make/linux64GccDPInt32Opt/` æ–‡ä»¶å¤¹ä¸‹ï¼ˆæ ¹æ®å¹³å°å¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼‰ã€‚ç¼–è¯‘å½¢æˆçš„å¯æ‰§è¡Œç¨‹åºåœ¨ `$FOAM_USER_APPBIN` æ–‡ä»¶å¤¹ä¸‹ã€‚

è¿™ä¸ªå¯æ‰§è¡Œç¨‹åºä¸éœ€è¦ä»ä»»ä½•å¤–éƒ¨æ–‡ä»¶è¯»å–å‚æ•°ï¼Œå¯ä»¥åœ¨ä»»ä½•è·¯å¾„ä¸‹é€šè¿‡ç»ˆç«¯å‘½ä»¤ç›´æ¥è¿è¡Œã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥è¿è¡Œè¿™ä¸ªåº”ç”¨

```
// terminal
ofsp_00_helloWorld_wmake
```

è¿è¡Œç»“æœå¦‚ä¸‹

```
Hi, OpenFOAM! Here we are.
1 + 3.14159 = 4.14159
1 * 3.14159 = 3.14159

Current time step is : 0.2
```

### åŠ¨æ€åº“

åœ¨å®é™…çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦ä½¿ç”¨åŠ¨æ€åº“æ¥ä¿è¯å†…å­˜å’Œæ•ˆç‡ã€‚

æˆ‘ä»¬è°ƒæ•´æ–‡ä»¶ç»“æ„å¦‚ä¸‹

```
ofsp_00_helloWorld_wmake/
â”œâ”€â”€ Aerosand/
â”‚Â Â  â”œâ”€â”€ Aerosand.C
â”‚Â Â  â”œâ”€â”€ Aerosand.H
â”‚Â Â  â””â”€â”€ Make/
â”‚Â Â      â”œâ”€â”€ files
â”‚Â Â      â””â”€â”€ options
â”œâ”€â”€ Make/
â”‚Â Â  â”œâ”€â”€ files
â”‚Â Â  â””â”€â”€ options
â””â”€â”€ ofsp_00_helloWorld_wmake.C

```

> æ³¨æ„æ­¤æ—¶çš„æ–‡ä»¶ç»“æ„ï¼Œåº“è‡ªå·±å•ç‹¬æ‹¥æœ‰ä¸€å¥— `åº“ Make` ã€‚

#### åº“ Make

ä¸ºåº“åˆ›å»º Make æ–‡ä»¶

æ–‡ä»¶ `.../ofsp/ofsp_00_helloWorld_wmake/Aerosand/Make/files` å†…å®¹å¦‚ä¸‹

```Make/files
Aerosand.C

LIB = $(FOAM_USER_LIBBIN)/libAerosand

```

> - æ³¨æ„åº“ä½¿ç”¨ `LIB` è€Œä¸æ˜¯ `EXE`
> - åº“çš„ç›®æ ‡è·¯å¾„ç»“å°¾æ˜¯ `LIBBIN`
> - ç›®æ ‡æ–‡ä»¶éœ€è¦åŠ  `lib`

å› ä¸ºè¿™ä¸ª Aerosand åº“çš„å®ç°ä¸å†è¿›ä¸€æ­¥éœ€è¦é“¾æ¥å…¶ä»–åº“ï¼Œæ‰€ä»¥ `.../ofsp/ofsp_00_helloWorld_wmake/Aerosand/Make/options` ç›´æ¥ç©ºç½®å³å¯ã€‚

æ ¹ç›®å½•ä¸‹ç¼–è¯‘è¿™ä¸ªåº“

```
// terminal

wmake Aerosand
```

ç»ˆç«¯è¾“å‡ºä¿¡æ¯æœ‰ä¸¤æ®µï¼Œæˆ‘ä»¬å…³æ³¨æ¯æ®µè¾“å‡ºçš„æœ€åéƒ¨åˆ†

ç¬¬ä¸€æ®µæ˜¯è‡ªå®šä¹‰çš„ Aerosand åº“ç¼–è¯‘å¾—åˆ°ç›®æ ‡æ–‡ä»¶ `Aerosand.o` ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ï¼‰

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra 
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100   -iquote. 
-IlnInclude -I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -c Aerosand.C
-o Make/linux64GccDPInt32Opt/Aerosand.o
```

ç¬¬äºŒæ®µå°†ç›®æ ‡æ–‡ä»¶ `Aerosand.o` ç¼–è¯‘æˆåŠ¨æ€åº“ `Aerosand.so` ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ï¼‰

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra 
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100   -iquote. 
-IlnInclude -I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -shared -
Xlinker --add-needed -Xlinker --no-as-needed  Make/linux64GccDPInt32Opt/Aerosand.o -
L/usr/lib/openfoam/openfoam2312/platforms/linux64GccDPInt32Opt/lib \
      -o /home/aerosand/OpenFOAM/aerosand-
v2312/platforms/linux64GccDPInt32Opt/lib/libAerosand.so
```

> å¯ä»¥é€šè¿‡å‘½ä»¤ `cd $FOAM_USER_LIBBIN` ç¡®è®¤ Aerosand åº“çš„ç¼–è¯‘ç»“æœæ–‡ä»¶ `libAerosand.so` çš„æ‰€åœ¨ä½ç½®ã€‚

å› ä¸ºåº“å†…çš„ç±»å¯èƒ½ä¼šæœ‰å¤šä¸ªï¼Œç”šè‡³è¿˜æœ‰å…¶ä»–å­åº“ï¼Œæ‰€ä»¥åº“ç¼–è¯‘åä¼šåŒæ—¶åœ¨åº“çš„ç›®å½•ä¸‹ç”Ÿæˆ `lnInclude` æ–‡ä»¶å¤¹ï¼Œ`lnInclude` åŒ…å«äº†è¯¥åº“æ‰€æœ‰ç±»ï¼ˆ/å­åº“ï¼‰çš„å£°æ˜ï¼ˆ `.H` æ–‡ä»¶ï¼‰æˆ–è€…å®ç° `.Cæ–‡ä»¶` çš„å¿«æ·æ–¹å¼ï¼Œæ–¹ä¾¿åç»­é“¾æ¥çš„æ—¶å€™å¯ä»¥æä¾›ç»Ÿä¸€è·¯å¾„ã€‚å¯ä»¥å‚è€ƒ OpenFOAM çš„ `$FOAM_SRC/OpenFOAM` åº“ï¼Œå¯ä»¥çœ‹åˆ°æ ¹ç›®å½•ä¸‹æœ‰ `lnInclude` æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­åŒ…å«äº†æ­¤åº“å†…çš„æ‰€æœ‰ç±»ï¼ˆ/å­åº“ï¼‰çš„å¿«æ·æ–¹å¼ã€‚

> æˆ‘ä»¬åœ¨ç»ˆç«¯ä½¿ç”¨ `find` å‘½ä»¤æœç´¢ OpenFOAM æºä»£ç æ–‡ä»¶çš„æ—¶å€™ï¼Œå¾€å¾€èƒ½çœ‹åˆ°ç›¸è¿‘çš„è·¯å¾„ `lnInclude/` ä¸‹ä¹Ÿæœ‰ä¸€ä¸ªåŒåæ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯å¿«æ·æ–¹å¼ã€‚æˆ‘ä»¬ä¸€èˆ¬é€‰æ‹©æ‰“å¼€é˜…è¯»æœ¬ä½“

ä»¥æ±‚è§£å™¨å¿…å¤‡å¤´æ–‡ä»¶ `setRootCase.H` ä¸ºä¾‹ï¼Œå¦‚æœæˆ‘ä»¬æŸ¥æ‰¾ï¼Œä¼šæœ‰

```
find $FOAM_SRC -iname setRootCase.H
// /usr/lib/openfoam/openfoam2406/src/OpenFOAM/include/setRootCase.H
// /usr/lib/openfoam/openfoam2406/src/OpenFOAM/lnInclude/setRootCase.H
```

æˆ‘ä»¬æŸ¥çœ‹ `lnInclude` æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶æ˜¯å¦æ˜¯å¿«æ·æ–¹å¼

```
ls -l $FOAM_SRC/OpenFOAM/lnInclude/setRootCase.H
//  lrwxrwxrwx 1 root root 24  1æœˆ  2 23:03 /usr/lib/openfoam/openfoam2406/src/OpenFOAM/lnInclude/setRootCase.H -> ../include/setRootCase.H
```

å¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹åˆ°è¯¥å¿«æ·æ–¹å¼çš„æŒ‡å‘ã€‚

### åº”ç”¨ Make

å› ä¸º Aerosand åº“å·²ç»è¢«ç¼–è¯‘æˆäº†åŠ¨æ€åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨çš„ `Make/options` æ–‡ä»¶ä¸­ä¸ºåº”ç”¨æä¾›åŠ¨æ€åº“é“¾æ¥ã€‚`Make/files` æŒ‡å®šçš„ç¼–è¯‘ä¸å†éœ€è¦è¯¥åŠ¨æ€åº“çš„æºä»£ç ã€‚

ä¿®æ”¹ `.../ofsp/ofsp_00_helloWorld_wmake/Make/files` æ–‡ä»¶

```Make/files
ofsp_00_helloWorld_wmake.C

EXE = $(FOAM_USER_APPBIN)/ofsp_00_heloWorld_wmake

```

ä¿®æ”¹ `.../ofsp/ofsp_00_helloWorld_wmake/Make/options` æ–‡ä»¶

```Make/options
EXE_INC = \
    -IAerosand/lnInclude

EXE_LIBS = \
    -L$(FOAM_USER_LIBBIN) \
    -lAerosand

```

æ ‡è¯†ç¬¦å·
- `EXE_INC` æŒ‡å®šéœ€è¦**åŒ…å«**çš„åº“
	- `-I` åŒæ ·ç”¨æ¥æŒ‡å®š**åŒ…å«**â€œ`åº“.H`â€ï¼Œä» `lnInclude` æ–‡ä»¶å¤¹å–å¾—è·¯å¾„
- `EXE_LIB` æŒ‡å®šéœ€è¦**é“¾æ¥**çš„åº“
	- `-L` åŒæ ·ç”¨æ¥æŒ‡å®š**é“¾æ¥**â€œ`åº“æ–‡ä»¶.so`â€çš„è·¯å¾„
	- `-l` åŒæ ·ç”¨æ¥æŒ‡å®š**é“¾æ¥**â€œ`åº“æ–‡ä»¶.so`â€çš„åç§°ï¼ˆå­—æ¯æ˜¯ link çš„ lï¼Œä¸æ˜¯ include çš„ iï¼‰

> æˆ‘ä»¬å¸¸è§çš„ OpenFOAM æ±‚è§£å™¨çš„ `Make/options` ä¸­æ²¡æœ‰ `-L` æŒ‡å®šåªæœ‰ `-l` æŒ‡å®šï¼Œè¿™æ˜¯å› ä¸ºé‚£äº›æ±‚è§£å™¨ä¸­ä½¿ç”¨çš„éƒ½æ˜¯åŸç”Ÿåº“ï¼Œé“¾æ¥è·¯å¾„å·²ç»å¾—åˆ°é…ç½®ï¼Œæ— éœ€è¿›è¡Œ `-L` è·¯å¾„æŒ‡å®šï¼Œä»…è¿›è¡Œ `-l` åç§°æŒ‡å®šå³å¯ã€‚å¦‚æœæ˜¯ç”¨æˆ·è‡ªå®šä¹‰åº“ï¼Œç¼–è¯‘ç»“æœåœ¨å…¶ä»–æ–‡ä»¶ä½ç½®ï¼Œå½“ç„¶ä¹Ÿéœ€è¦è¿›è¡Œ `-L` è·¯å¾„æŒ‡å®šã€‚
>   
> ä¸€å®šè¦æ³¨æ„è·¯å¾„ï¼Œè·¯å¾„å¯¹äºæˆåŠŸç¼–è¯‘éå¸¸é‡è¦ã€‚ä¸€èˆ¬æŒ‡å®šçš„è·¯å¾„éƒ½æ˜¯ä»æœ¬åœ°å‡ºå‘çš„ï¼ˆå¯ä»¥ä»æœ¬åœ°è·¯å¾„å‡ºå‘ï¼Œå®šä¹‰å…¶ä»–åº“çš„ç»å¯¹è·¯å¾„ï¼Œè§ä¸‹æ–‡æ¼”ç¤ºï¼‰ã€‚

### ç¼–è¯‘è¿è¡Œ

ç¼–è¯‘åº”ç”¨

```
// terminal
wclean
wmake
```

æ­¤æ—¶ç»ˆç«¯ä¿¡æ¯åˆ†ä¸ºä¸¤æ®µï¼Œç¬¬ä¸€æ®µå°†ä¸»æºç ç¼–è¯‘æˆç›®æ ‡æ–‡ä»¶ï¼Œç¬¬äºŒæ®µé“¾æ¥åŠ¨æ€åº“åˆ°åº”ç”¨ï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚

ç¬¬ä¸€æ®µæ˜¯ä¸»æºç ç¼–è¯‘å¾—åˆ°ç›®æ ‡æ–‡ä»¶ `ofsp_00_helloWorld_wmake.o` ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ï¼‰

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra 
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100  
-IAerosand/lnInclude -iquote. -IlnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -c 
ofsp_00_helloWorld_wmake.C -o Make/linux64GccDPInt32Opt/ofsp_00_helloWorld_wmake.o
```

ç¬¬äºŒæ®µé“¾æ¥åŠ¨æ€åº“åˆ°åº”ç”¨ï¼Œå¹¶ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ `ofsp_00_helloWorld_wmake` ï¼ˆè§è¾“å‡ºä¿¡æ¯çš„æœ«å°¾å¤„ä¸¤å¥ï¼‰

```
g++ -std=c++14 -m64 -pthread -DOPENFOAM=2312 -DWM_DP -DWM_LABEL_SIZE=32 -Wall -Wextra 
-Wold-style-cast -Wnon-virtual-dtor -Wno-unused-parameter -Wno-invalid-offsetof -Wno-
attributes -Wno-unknown-pragmas -O3  -DNoRepository -ftemplate-depth-100  
-IAerosand/lnInclude -iquote. -IlnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OpenFOAM/lnInclude 
-I/usr/lib/openfoam/openfoam2312/src/OSspecific/POSIX/lnInclude   -fPIC -Xlinker --add-needed -Xlinker --no-as-needed
Make/linux64GccDPInt32Opt/ofsp_00_helloWorld_wmake.o 
-L/usr/lib/openfoam/openfoam2312/platforms/linux64GccDPInt32Opt/lib \
    -L/home/aerosand/OpenFOAM/aerosand-v2312/platforms/linux64GccDPInt32Opt/lib 
    -lAerosand -lOpenFOAM -ldl  \
     -lm -o /home/aerosand/OpenFOAM/aerosand-
v2312/platforms/linux64GccDPInt32Opt/bin/ofsp_00_helloWorld_wmake
```

> å¯ä»¥é€šè¿‡ `cd $FOAM_USER_APPBIN` ç¡®è®¤åº”ç”¨çš„å¯æ‰§è¡Œç¨‹åºè¢«ç¼–è¯‘åˆ°äº†å“ªé‡Œã€‚

è¿è¡Œç¼–è¯‘ç”Ÿæˆçš„åº”ç”¨ç¨‹åº

```
// terminal
ofsp_00_helloWorld_wmake
```

è¿è¡Œç»“æœå¦‚ä¸‹

```
Hi, OpenFOAM! Here we are.
1 + 3.14159 = 4.14159
1 * 3.14159 = 3.14159

Current time step is : 0.2
```

ç»“æœå’Œå‰é¢å„ç§æ–¹å¼å®ç°çš„ç»“æœç›¸åŒã€‚

## OpenFOAM ç±»

å‰é¢æˆ‘ä»¬å·²ç»äº†è§£äº† C++ åŸç”Ÿå®ç°ã€make å®ç°ä»¥åŠ OpenFOAM çš„ wmake å®ç°ã€‚åœ¨æ­£å¼è¿›å…¥åˆ° OpenFOAM å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ç¨å¾®äº†è§£ä¸€ç‚¹ OpenFOAM ä¸­çš„ç±»ï¼Œä»¥æ–¹ä¾¿ä½¿ç”¨ã€‚

### å¸¸è§çš„ç±»

OpenFOAM ä¸­æœ‰å¤§é‡çš„ç±»ã€‚æˆ‘ä»¬å¤§æ¦‚äº†è§£ä¸€äº›å¸¸è§çš„ç±»å‹/ç±»ï¼š

ä¸‹é¢å¯ä»¥åœ¨ [OpenFOAM: API Guide: OpenFOAMÂ®: Open source CFD : API](https://www.openfoam.com/documentation/guides/latest/api/index.html) ä¸­åˆ†åˆ«æŸ¥è¯¢ã€‚

- `Switch`
	- OpenFOAM ä¸ºäº†ç”¨æˆ·ä½¿ç”¨ç®€å•æ–¹ä¾¿ï¼Œå¤§é‡ä½¿ç”¨ `Switch` ä¾›ç”¨æˆ·é€‰æ‹©ã€‚`Switch` æœ¬è´¨ä¸Šä¸€ç§å¸ƒå°”ç±»å‹ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨ `false` ï¼Œ `off`  ï¼Œ `no` ï¼Œ  `n`  ï¼Œ `f` è¡¨ç¤ºå¦å®šé€‰é¡¹ï¼Œä½¿ç”¨ `true` ï¼Œ  `on` ï¼Œ `yes` ï¼Œ `y`  ï¼Œ `t` è¡¨ç¤ºè‚¯å®šé€‰é¡¹
- `label`
	- æœ¬è´¨ä¸Šæ˜¯ OpenFOAM å®šä¹‰çš„å…·æœ‰ `INT_SIZE` å¤§å°çš„ integer data type
- `scalar`
	- æœ¬è´¨ä¸Šæ˜¯ OpenFOAM å®šä¹‰çš„å…·æœ‰ `FLOAT_SIZE` æˆ–è€… `DOUBLE_SIZE` å¤§å°çš„ floating-point data type
- `vector`
	- çŸ¢é‡æ•°æ®ç»“æ„
	- åŒ…å«é‡è½½åçš„æ•°å­¦è¿ç®—æ–¹æ³•
- `tensor`
	- å¼ é‡æ•°æ®ç»“æ„
	- åŒ…å«é‡è½½åçš„æ•°å­¦è¿ç®—æ–¹æ³•
- `dimensionedScalar/*Vector/*Tensor`
	- å…·æœ‰ OpenFOAM å•ä½ç³»ç»Ÿçš„é‡
	- åŒ…å«åç§°ã€å•ä½å’Œå–å€¼ç­‰æˆå‘˜æ•°æ®ï¼Œä»¥åŠç›¸åº”çš„æˆå‘˜æ–¹æ³•
- `scalar*/vector*/tensorField`
	- åŸºç¡€ç±»å‹çš„åˆ—è¡¨å€¼
	- æè¿°å„ç§åœº
	- åŒ…å«æ•°æ®å’Œæ–¹æ³•
- `dimensionSet`
	- OpenFOAM çš„å•ä½ç³»ç»Ÿ
	- `dimensionSet (const scalar mass, const scalar length, const scalar time, const scalar temperature, const scalar moles, const scalar current=0, const scalar luminousIntensity=0)`
	- `[è´¨é‡, é•¿åº¦, æ—¶é—´, æ¸©åº¦, æ‘©å°”, ç”µæµ, å…‰å¼º]`
	- OpenFOAM ä¹Ÿæä¾›å¾ˆå¤šå•ä½çš„ç»„åˆ `$FOAM_SRC/OpenFOAM/dimensionSet/dimensionSets.H`
	- ä»¥åä¼šæ·±å…¥è®¨è®º
- `tmp<>`
	- OpenFOAM ç»å¸¸è§åˆ°çš„å¤„ç†ä¸´æ—¶æ•°æ®çš„ç‰¹æ®Šç±»
	- å› ä¸º C++ å¾ˆå¤šæ—¶å€™çš„å†…å­˜éƒ½éœ€è¦æ‰‹åŠ¨ç®¡ç†ï¼Œæ‰€ä»¥ OpenFOAM ä¸ºå¼€å‘è€…æä¾›æ­¤ç±»
	- æ— éœ€æ·±ç©¶
- `IOobject`
	- æä¾›æ¥å…¥ OpenFOAM å„ç§æ•°æ®ç»“æ„çš„æ–¹æ³•ï¼Œæœ¬èº«æ²¡æœ‰æˆå‘˜æ•°æ®
	- ä»¥åä¼šæ·±å…¥è®¨è®º


### Vector ç±»

æˆ‘ä»¬æ‹¿å‡º Vector ç±»çœ‹ä¸€ä¸‹ OpenFOAM å¯¹ Vector ç±»çš„å®ç°ã€‚

> æ›´å¤šä»£ç çš„è¯¦ç»†è®¨è®ºå‚è§ `ofsc` ç³»åˆ—ã€‚

æ‰¾åˆ° Vector ç±»ï¼Œè¿›å…¥æ–‡ä»¶å¤¹ï¼Œ

```
// terminal
cd $FOAM_SRC/OpenFOAM/primitives/Vector
l
// bools/  complex/  floats/  ints/  lists/  Vector.H  VectorI.H
```

é˜…è¯» `Vector.H` çš„ä»‹ç»å¯çŸ¥ï¼Œè¯¥ç±»æ˜¯æ¨¡æ¿åŒ–çš„ 3D Vectorï¼Œç»§æ‰¿è‡ª VectorSpace å¹¶æ·»åŠ äº† 3 åˆ†é‡çš„æ„é€ ã€åˆ†é‡å…ƒç´ çš„æ¥å£å‡½æ•°ã€ç‚¹ç§¯å’Œå‰ç§¯çš„æ–¹æ³•ç­‰ã€‚å…·ä½“åˆ° `Vector.H` çš„ä»£ç ï¼Œå¯ä»¥çœ‹åˆ°ç®€å•çš„æ–¹æ³•åœ¨ä»£ç ä¸­ç›´æ¥å®ç°ï¼Œå¤æ‚æ–¹æ³•åˆ™å¤§é‡ä½¿ç”¨å†…è”å‡½æ•°ï¼ˆinline funtionï¼‰ä»¥æé«˜ä»£ç æ€§èƒ½ã€‚OpenFOAM ç‰¹åˆ«æä¾› `VectorI.H` æ–‡ä»¶æ¥å†™å†…è”å‡½æ•°çš„å®ç°ã€‚è¯¥ç±»æ²¡æœ‰ `.C` æ–‡ä»¶ï¼Œå› ä¸ºæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é€šè¿‡å†…è”å‡½æ•°å®ç°çš„ã€‚å…¶ä»–çš„æ–‡ä»¶å¤¹ `/bools` ï¼Œ `/complex` ï¼Œ `/floats` ï¼Œ`/ints` ï¼Œ`/lists` éƒ½æ˜¯ Vector ç±»å¯¹ä¸åŒåŸºæœ¬ç±»å‹çš„ `typedef` ã€‚

æˆ‘ä»¬å¤§æ¦‚çœ‹ä¸€ä¸‹ `Vector.H` ä»£ç 

> é™Œç”Ÿçš„ä»£ç ç»†èŠ‚å¯ä»¥å¿½ç•¥ï¼Œæˆ–è€…ç½‘ä¸ŠæŸ¥è¯¢ç›¸å…³è¯­æ³•ã€‚

```cpp
namespace Foam
{

// Forward Declarations
template<class T> class List; // æå‰å£°æ˜

/*---------------------------------------------------------------------------*\
                           Class Vector Declaration
\*---------------------------------------------------------------------------*/

template<class Cmpt>
class Vector
:
    public VectorSpace<Vector<Cmpt>, Cmpt, 3> // ç»§æ‰¿è‡ªçˆ¶ç±»
{
public:

    // Typedefs

        //- Equivalent type of labels used for valid component indexing
        typedef Vector<label> labelType; // ä¸ºäº†æ–¹ä¾¿ typedef


    // Member Constants

        //- Rank of Vector is 1
        static constexpr direction rank = 1; // å®šä¹‰å¸¸é‡è¡¨è¾¾å¼


    //- Component labeling enumeration
    enum components { X, Y, Z }; // æšä¸¾ç±»å‹


    // Generated Methods

        //- Default construct
        Vector() = default; // é»˜è®¤æ„é€ 

        //- Copy construct
        Vector(const Vector&) = default; // é»˜è®¤æ‹·è´æ„é€ 

        //- Copy assignment
        Vector& operator=(const Vector&) = default; // é»˜è®¤æ‹·è´è¿ç®—ç¬¦é‡è½½


    // Constructors

        //- Construct initialized to zero
        inline Vector(const Foam::zero); // ç½®é›¶æ„é€ 

        //- Copy construct from VectorSpace of the same rank
        template<class Cmpt2>
        inline Vector(const VectorSpace<Vector<Cmpt2>, Cmpt2, 3>& vs);
        // åŸºäº VectorSpace å¯¹è±¡çš„æ‹·è´æ„é€ 

        //- Construct from three components
        inline Vector(const Cmpt& vx, const Cmpt& vy, const Cmpt& vz);
        // åŸºäº3åˆ†é‡çš„æ„é€ 

        //- Construct from Istream
        inline explicit Vector(Istream& is);
        // åŸºäº Istream çš„æ„é€ 
...
```

æ¯”å¦‚ï¼ŒåŸºäº 3 åˆ†é‡çš„æ„é€ ï¼Œå…¶å†…è”å‡½æ•°åœ¨ `VectorI.H` ä¸­å®ç°å¦‚ä¸‹ï¼ˆ`Vector` åé¢åŠ åç¼€ `I` ç”¨æ¥è¡¨ç¤ºæ˜¯å¯¹å†…è”å‡½æ•°çš„å®ç°ï¼‰


```cpp
template<class Cmpt>
inline Foam::Vector<Cmpt>::Vector
(
    const Cmpt& vx,
    const Cmpt& vy,
    const Cmpt& vz
)
{
    this->v_[X] = vx;
    this->v_[Y] = vy;
    this->v_[Z] = vz;
}
```

- æˆå‘˜æ•°æ® `v_` å’Œé‡è½½çš„è¿ç®—ç¬¦ `[]` æ¥è‡ªçˆ¶ç±» `VectorSpace`
	- æŸ¥çœ‹ `$FOAM_SRC/primitives/VectorSpace/VectorSpace.H`
- ä¼ å…¥å‡½æ•°çš„å‚æ•°ä¸º `vx, vy, vz`ï¼Œå¹¶ä½¿ç”¨**å¸¸å¼•ç”¨**æé«˜æ€§èƒ½ï¼Œä¿è¯æ•°æ®å®‰å…¨
- å‡½æ•°å°† 3 åˆ†é‡å‚æ•°å¯¹åº”ä¼ å…¥ç±»çš„æˆå‘˜æ•°æ®
- æ¨¡æ¿åŒ–çš„å‡½æ•°ï¼Œç±»å‹ä¸º `Cmpt`
- å¦‚æœæˆ‘ä»¬è‡ªå·±å†™ä¹Ÿå¯ä»¥å‚è€ƒè¿™ç§ç±»çš„æ¶æ„

æ¯”å¦‚ï¼Œ3 åˆ†é‡çš„æ¥å£å‡½æ•°å› ä¸ºç®€å•ï¼Œå°±æ²¡æœ‰å†…è”è€Œç›´æ¥è·Ÿåœ¨ `Vector.H` å¯¹åº”çš„å£°æ˜ä¸­ç›´æ¥å®ç°ï¼Œå¦‚ä¸‹

```cpp
// Member Functions

// Component Access

//- Access to the vector x component
const Cmpt& x() const noexcept { return this->v_[X]; }

//- Access to the vector y component
const Cmpt& y() const noexcept { return this->v_[Y]; }

//- Access to the vector z component
const Cmpt& z() const noexcept { return this->v_[Z]; }

//- Access to the vector x component
Cmpt& x() noexcept { return this->v_[X]; }

//- Access to the vector y component
Cmpt& y() noexcept { return this->v_[Y]; }

//- Access to the vector z component
Cmpt& z() noexcept { return this->v_[Z]; }
```

- å¯¹å¸¸é‡æ•°æ®å’Œéå¸¸é‡æ•°æ®å®šä¹‰äº†ä¸¤å¥—å‡½æ•°ï¼Œæé«˜æ€§èƒ½
- æ ‡è¯†ç¬¦ `noexcept` ç›´æ¥å‘Šè¯‰ç¼–è¯‘å™¨è¯¥å‡½æ•°ä¸ä¼šå‘ç”Ÿå¼‚å¸¸ï¼Œåˆ©äºç¼–è¯‘ä¼˜åŒ–

æ¯”å¦‚ï¼Œæ ‡é‡ç§¯å’ŒçŸ¢é‡ç§¯çš„å£°æ˜å’Œå®ç°åˆ†åˆ«æ˜¯

å£°æ˜å¦‚ä¸‹ï¼š

```cpp
// Vector.H

//- Scalar-product of \c this with another Vector.
inline Cmpt inner(const Vector<Cmpt>& v2) const;

//- Cross-product of \c this with another Vector.
inline Vector<Cmpt> cross(const Vector<Cmpt>& v2) const;
```

å¯¹åº”çš„å®ç°å¦‚ä¸‹ï¼š

```cpp
// VectorI.H
template<class Cmpt>
inline Cmpt Foam::Vector<Cmpt>::inner(const Vector<Cmpt>& v2) const
{
    const Vector<Cmpt>& v1 = *this;

    return (v1.x()*v2.x() + v1.y()*v2.y() + v1.z()*v2.z());
}


template<class Cmpt>
inline Foam::Vector<Cmpt>
Foam::Vector<Cmpt>::cross(const Vector<Cmpt>& v2) const
{
    const Vector<Cmpt>& v1 = *this;

    return Vector<Cmpt>
    (
        (v1.y()*v2.z() - v1.z()*v2.y()),
        (v1.z()*v2.x() - v1.x()*v2.z()),
        (v1.x()*v2.y() - v1.y()*v2.x())
    );
}
```

- `const` çº¦æŸè¾“å…¥å‚æ•°ï¼Œéœ€è¦ä½¿ç”¨å¸¸é‡ vector
- `const` çº¦æŸå‡½æ•°ä½“ï¼Œå‡½æ•°ä½“å†…éƒ¨ä¸èƒ½ä¿®æ”¹ç±»çš„æˆå‘˜æ•°æ®
- å¦å¤–å£°æ˜ `v1` ä½œä¸ºæœ¬ç±»çš„æˆå‘˜æ•°æ® `v_` çš„å¼•ç”¨
- è¿”å› `v1` å’Œ `v2` çš„è®¡ç®—ç»“æœ

æ ¹æ®ç±»å‹ `Cmpt` çš„ä¸åŒï¼Œå°±å®ç°äº†é’ˆå¯¹ä¸åŒç±»å‹çš„æ–¹æ³•ã€‚æ¯”å¦‚ `Vector<scalar>` å°±æ˜¯ `scalar` ç±»å‹çš„ç±»å®ç°ã€‚æ¯”å¦‚ï¼Œåœ¨ `/Vector/ints/labelVector.H` æ–‡ä»¶ä¸­è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼Œå¦‚ä¸‹

```cpp
typedef Vector<label> labelVector;
```

ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰¾åˆ° `tensor.H` é˜…è¯»å’Œäº†è§£ `tensor` ç±»ã€‚

> ä¸Šé¢è¿™äº›ä»£ç ä»‹ç»ä¸»è¦æ˜¯ä¸ºäº†å¸®åŠ©è¯»è€…æ…¢æ…¢ç†Ÿæ‚‰ C++ è¯­è¨€åœ¨ OpenFOAM ä¸­çš„ä½¿ç”¨ï¼Œå…‹æœå¯¹ C++ è¯­è¨€çš„é™Œç”Ÿå’Œææƒ§ï¼Œä¾¿äºè¯»è€…ç†è§£ä¸‹æ–‡è¦å†™çš„ä¸»æºç ã€‚æš‚æ—¶ä¸éœ€è¦èŠ±è´¹æ›´å¤šæ—¶é—´å»é˜…è¯»æ›´å¤š OpenFOAM çš„æºä»£ç ï¼Œåç»­ä¼šåœ¨ `ofsc` ç³»åˆ—è®¨è®ºä»£ç ã€‚

### é¡¹ç›®å‡†å¤‡

æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªåº”ç”¨æ¥ä½¿ç”¨ OpenFOAM çš„è‡ªæœ‰ç±»å‹/ç±»ã€‚

```
// terminal
ofsp
mkdir ofsp_00_helloWorld_tensor
code ofsp_00_helloWorld_tensor
```

å»ºç«‹æ–‡ä»¶ç»“æ„å¦‚ä¸‹

```
ofsp_00_helloWorld_tensor/
â”œâ”€â”€ Aerosand/
â”‚Â Â  â”œâ”€â”€ class1/
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ class1.C
â”‚Â Â  â”‚Â Â  â””â”€â”€ class1.H
â”‚Â Â  â”œâ”€â”€ class2/
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ class2.C
â”‚Â Â  â”‚Â Â  â””â”€â”€ class2.H
â”‚Â Â  â””â”€â”€ Make/
â”‚Â Â      â”œâ”€â”€ files
â”‚Â Â      â””â”€â”€ options
â”œâ”€â”€ Make/
â”‚Â Â  â”œâ”€â”€ files
â”‚Â Â  â””â”€â”€ options
â””â”€â”€ ofsp_00_helloWorld_tensor.C

```

> æ³¨æ„ï¼Œå¼€å‘åº“çš„æ–‡ä»¶ç»“æ„ä¸å‰æ–‡ç¨æœ‰ä¸åŒã€‚  
> 
> æˆ‘ä»¬åœ¨å‰æ–‡å·²ç»å¯ä»¥æ³¨æ„åˆ° OpenFOAM åº“ä¸‹ä¸€èˆ¬æœ‰å¤šä¸ªå­åº“/ç±»ã€‚
> 
> ç”¨æˆ·çš„å¼€å‘åº“é‡Œå¯èƒ½ä¹Ÿä¼šç”±å¥½å‡ ä¸ªç±»æ„æˆï¼Œå¼€å‘åº“æ‹¥æœ‰è‡ªå·±çš„ Make æ–‡ä»¶ï¼Œé›†ä¸­ç®¡ç†å¤šä¸ªç±»ï¼Œæ¯”å¦‚è¿™é‡Œæœ‰ `class1` å’Œ `class2` ã€‚

### å¼€å‘åº“

å¤´æ–‡ä»¶ `class1.H` å¦‚ä¸‹

```cpp
#pragma once

class class1
{
private:
    double localTime_;

public:
    void SetLocalTime(double t);
    double GetLocalTime() const;
};

```

æºæ–‡ä»¶ `class1.C` å¦‚ä¸‹

```cpp
#include "class1.H"

void class1::SetLocalTime(double t) {
    localTime_ = t;
}

double class1::GetLocalTime() const {
    return localTime_;
}

```

å¤´æ–‡ä»¶ `class2.H` å¦‚ä¸‹

```cpp
#pragma once

class class2
{
public:
    void class2Info() const;
};

```

æºæ–‡ä»¶ `class2.C` å¦‚ä¸‹

```cpp
#include "class2.H"

#include <iostream>

void class2::class2Info() const 
{
    std::cout << "This is class2\n" << std::endl;;
}

```

#### åº“ Make

ä¸ºå¼€å‘åº“å†™ Make æ–‡ä»¶

æ–‡ä»¶ `.../ofsp/ofsp_00_helloWorld_tensor/Aerosand/Make/files` å¦‚ä¸‹

```cpp
class1/class1.C
class2/class2.C

LIB = $(FOAM_USER_LIBBIN)/libAerosand

```

æœ¬æ¬¡å¼€å‘åº“çš„å®ç°æ²¡æœ‰å†ç”¨åˆ°å…¶ä»–åº“ï¼Œæ‰€ä»¥åº“æ–‡ä»¶ `.../ofsp/ofsp_00_helloWorld_tensor/Aerosand/Make/options` ç©ºç½®ã€‚

å°†å¼€å‘åº“ç¼–è¯‘æˆåŠ¨æ€åº“

```
// terminal 
wmake Aerosand
```

é¡ºåˆ©ç¼–è¯‘åï¼Œå¯ä»¥åœ¨ `.../ofsp/ofsp_00_helloWorld_tensor/Aerosand/lnInclude` å†…çœ‹åˆ°ç±»çš„å¿«æ·æ–¹å¼ã€‚

### ä¸»æºç 

å¦‚æœæˆ‘ä»¬è¦ä½¿ç”¨ tensor ç±»ï¼Œä¸ä»…è¦åŒ…å«å®ƒçš„å¤´æ–‡ä»¶ï¼Œè¿˜éœ€è¦åŒ…å«ç›¸å…³çš„åº“ã€‚

æŸ¥æ‰¾ tensor åº“

```
// terminal 
find $FOAM_SRC -name tensor.H
// $FOAM_SRC/OpenFOAM/lnInclude/tensor.H
// $FOAM_SRC/OpenFOAM/primitives/Tensor/floats/tensor.H
ls $FOAM_SRC/OpenFOAM
```

é€šè¿‡ `ls` å‘½ä»¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ° `OpenFOAM` æ‹¥æœ‰è‡ªå·±çš„ Make æ–‡ä»¶ä»¥åŠ `lnInclude` ï¼Œæ‰€ä»¥ tensor ç±»å±äº OpenFOAM åº“ã€‚åç»­æˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨ä¸­åŒ…å«ã€é“¾æ¥ OpenFOAM åº“ã€‚

åŒæ ·çš„ï¼Œæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ `dimensionedTensor` å’Œ `tensorField`

```
// terminal
find $FOAM_SRC -name dimensionedTensor.H
// $FOAM_SRC/OpenFOAM/lnInclude/dimensionedTensor.H
// $FOAM_SRC/OpenFOAM/dimensionedTypes/dimensionedTensor/dimensionedTensor.H

find $FOAM_SRC -name tensorField.H
// $FOAM_SRC/OpenFOAM/lnInclude/tensorField.H
// $FOAM_SRC/OpenFOAM/fields/Fields/tensorField/tensorField.H
```

å¯ä»¥çœ‹åˆ°è¿™ä¸¤ä¸ªç±»ä¹Ÿå±äº `OpenFOAM` åº“ã€‚

æˆ‘ä»¬åŒ…å«è¿™äº›åº“ï¼Œä¹ŸåŒ…å«è‡ªå·±çš„å¼€å‘åº“

ä¸»æºç å¦‚ä¸‹

```cpp
#include "tensor.H"
#include "dimensionedTensor.H"
#include "tensorField.H"

#include "class1.H"
#include "class2.H"

using namespace Foam;

int main()
{
    scalar s(3.14);
    vector v1(1, 2, 3);
    vector v2(0.5, 1, 1.5);
    Info<< s << " * " << v1 << " = "  << s * v1 << nl 
        << "pos(s): " << pos(s) << nl
        << "asinh(s): " << Foam::asinh(s) << nl
        << endl;

    tensor T(11, 12, 13, 21, 22, 23, 31, 32, 33);
    Info<< "T: " << T << nl 
        << "Txy: " << T.xy() << nl
        << endl;

    tensor T1(1, 2, 3, 4, 5, 6, 7, 8, 9);
    tensor T2(1, 2, 3, 1, 2, 3, 1, 2, 3);
    tensor T3 = T1 + T2;
    Info<< "T3: " << T3 << nl << endl;

    tensor T4(3, -2, 1, -2, 2, 0, 1, 0, 4);
    Info<< "T4': " << inv(T4) << nl
        << "T4' * T4: " << (inv(T4) & T4) << nl
        << "T4.x(): " << T4.x() << nl
        << "T4.y(): " << T4.y() << nl
        << "T4.z(): " << T4.z() << nl
        << "T4^T: " << T4.T() << nl
        << "det(T4): " << det(T4) << nl
        << endl;

    dimensionedTensor sigma
    (
        "sigma",
        dimensionSet(1, -2, -2, 0, 0, 0, 0),
        tensor(1e6, 0, 0, 0, 1e6, 0, 0, 0, 1e6)
    );
    Info<< "sigma: " << sigma << nl 
        << "sigma name: " << sigma.name() << nl
        << "sigma dimension: " << sigma.dimensions() << nl
        << "sigma value: " << sigma.value() << nl
        << "sigma yy value: " << sigma.value().yy() << nl
        << endl;

    tensorField tf(2, tensor::one);
    Info<< "tf: " << tf << endl;
    tf[0] = tensor(1, 2, 3, 4, 5, 6, 7, 8, 9);
    tf[1] = T2;
    Info << "tf: " << tf << nl
        << "2.0 * tf" << 2.0 * tf << nl
        << endl;

	label a = 1;
    scalar pi = 3.1415926;
    Info<< "Hi, OpenFOAM!" << " Here we are." << nl
	    << a << " + " << pi << " = " << a + pi << nl
	    << a << " * " << pi << " = " << a * pi << nl
	    << endl;


    class1 mySolver;
    mySolver.SetLocalTime(0.2);
    Info<< "\nCurrent time step is : " << mySolver.GetLocalTime() << endl;

    class2 myMessage;
    myMessage.class2Info();

    return 0;
}

```

### åº”ç”¨ Make 

æ–‡ä»¶ `.../ofsp/ofsp_00_helloWorld_tensor/Make/files` å¦‚ä¸‹

```cpp
ofsp_00_helloWorld_tensor.C

EXE = $(FOAM_USER_APPBIN)/ofsp_00_helloWorld_tensor

```

åŸåˆ™ä¸Šæ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨ `.../ofsp/ofsp_00_helloWorld_tensor/Make/options` é‡Œé¢é“¾æ¥ `OpenFOAM` åº“ã€‚å®é™…ä¸Šï¼Œå› ä¸º `OpenFOAM` åº“æ˜¯æœ€åŸºæœ¬çš„åº“ï¼Œæ‰€ä»¥ï¼Œæ‰€æœ‰çš„åº”ç”¨éƒ½é»˜è®¤éšå«çš„è‡ªåŠ¨é“¾æ¥ `OpenFOAM` åº“ï¼Œæ— éœ€å†æ˜¾å¼çš„å†™æ˜ã€‚

æ‰€ä»¥ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ `.../ofsp/ofsp_00_helloWorld_tensor/Make/options` é‡Œé¢é“¾æ¥ç”¨æˆ·çš„å¼€å‘åº“ã€‚

```cpp
EXE_INC = \
    -IAerosand/lnInclude

EXE_LIBS = \
    -L$(FOAM_USER_LIBBIN) \
    -lAerosand

```

### ç¼–è¯‘è¿è¡Œ

```
// terminal
wclean
wmake
ofsp_00_helloWorld_tensor
```

è¿è¡Œç»“æœå¦‚ä¸‹

```
3.14 * (1 2 3) = (3.14 6.28 9.42)
pos(s): 1
asinh(s): 1.86181

T: (11 12 13 21 22 23 31 32 33)
Txy: 12

T3: (2 4 6 5 7 9 8 10 12)

T4': (1.33333 1.33333 -0.333333 1.33333 1.83333 -0.333333 -0.333333 -0.333333 0.333333)
T4' * T4: (1 0 0 1.66533e-16 1 0 -5.55112e-17 0 1)
T4.x(): (3 -2 1)
T4.y(): (-2 2 0)
T4.z(): (1 0 4)
T4^T: (3 -2 1 -2 2 0 1 0 4)
det(T4): 6

sigma: sigma [1 -2 -2 0 0 0 0] (1e+06 0 0 0 1e+06 0 0 0 1e+06)
sigma name: sigma
sigma dimension: [1 -2 -2 0 0 0 0]
sigma value: (1e+06 0 0 0 1e+06 0 0 0 1e+06)
sigma yy value: 1e+06

tf: 2{(1 1 1 1 1 1 1 1 1)}
tf: 2((1 2 3 4 5 6 7 8 9) (1 2 3 1 2 3 1 2 3))
2.0 * tf2((2 4 6 8 10 12 14 16 18) (2 4 6 2 4 6 2 4 6))

Hi, OpenFOAM! Here we are.
1 + 3.14159 = 4.14159
1 * 3.14159 = 3.14159

Current time step is : 0.2
This is class2
```

### fvCFD.H

åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç”¨åˆ°æ›´å¤šçš„å’Œ FVM ç›¸å…³çš„ç±»æ¥ç¦»æ•£æ±‚è§£åå¾®åˆ†æ–¹ç¨‹ã€‚OpenFOAM æä¾› `fvCFD.H` ï¼Œå…¶ä¸­åŒ…å«äº†å¤§éƒ¨åˆ†å’Œ FVM ç›¸å…³çš„å¤´æ–‡ä»¶ï¼ŒåŒ…æ‹¬ tensor ç±»ç­‰ã€‚ä½¿ç”¨ `fvCFD.H` å¯ä»¥å¤§å¤§å‡å°‘ä¸»æºç è¦å†™çš„å¤´æ–‡ä»¶æ•°é‡ã€‚

æˆ‘ä»¬æ‰¾ä¸€ä¸‹ `fvCFD.H` æ–‡ä»¶

```
// terminal
find $FOAM_SRC -name fvCFD.H
// $FOAM_SRC/finiteVolume/lnInclude/fvCFD.H
// $FOAM_SRC/finiteVolume/cfdTools/general/include/fvCFD.H
```

æ˜¾ç„¶ `fvCFD.H` ä¸åœ¨ `OpenFOAM åº“` é‡Œï¼Œè€Œæ˜¯åœ¨ `finiteVolume åº“` é‡Œï¼Œæ‰€ä»¥éœ€è¦å¦å¤–åœ¨ `Make/options` ä¸­åŒ…å«ã€é“¾æ¥ã€‚

æˆ‘ä»¬å°†ä¸Šè¿°ä¸»æºç ä¸­çš„éå¼€å‘åº“å¤´æ–‡ä»¶å…¨éƒ¨æ›¿æ¢æˆ `fvCFD.H` ã€‚

æ­¤æ—¶çš„ `Make/options` æ–‡ä»¶åº”ä¿®æ”¹ä¸ºï¼ˆå½“ç„¶å¼€å‘åº“é“¾æ¥ä»ç„¶éœ€è¦æœ‰ï¼‰

```cpp
EXE_INC = \
    -I$(LIB_SRC)/finiteVolume/lnInclude \
    -I$(LIB_SRC)/meshTools/lnInclude \
    -IAerosand/lnInclude

EXE_LIBS = \
    -lfiniteVolume \
    -lmeshTools \
    -L$(FOAM_USER_LIBBIN) \
    -lAerosand
```

- `finiteVolume` è¢«æ˜¾å¼çš„åŒ…å«ã€é“¾æ¥
- `meshTools` è¡¥å……äº† `finiteVolume` ä¸­æ¶‰åŠçš„å…¶ä»–åº“

é‡æ–°ç¼–è¯‘è¿è¡Œï¼Œç»“æœç›¸åŒã€‚

## OpenFOAM åº”ç”¨

åœ¨å®Œå…¨ç†è§£äº†ä¸Šé¢å…³äºç¼–è¯‘è¿‡ç¨‹è®¨è®ºçš„ç§ç§ï¼Œæˆ‘ä»¬ä½¿ç”¨ OpenFOAM æä¾›çš„å·¥å…·ï¼Œä¸²ä¸€ä¸ªè¾ƒä¸ºå®Œæ•´çš„åº”ç”¨å¼€å‘æµç¨‹ã€‚

### é¡¹ç›®å‡†å¤‡

åœ¨ç”¨æˆ·æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºåº”ç”¨é¡¹ç›®ï¼Œè¿›å…¥è¯¥åº”ç”¨é¡¹ç›®

```
// terminal
ofsp
foamNewApp ofsp_00_helloWorld
code ofsp_00_helloWorld
```

æ¥ç€å¯ä»¥æ‹·è´ä¸€ä¸ªç®€å•ç®—ä¾‹ç”¨äºå¼€å‘è¿‡ç¨‹çš„æµ‹è¯•ï¼ˆå¯¹äºè¯¥é¡¹ç›®æ¥è¯´ï¼Œä»…ä»…æ˜¯ä¸ºäº†é€šè¿‡ç®—ä¾‹æ£€æŸ¥ï¼‰

```
// terminal 
cp -r $FOAM_TUTORIALS/incompressible/icoFoam/cavity/cavity debug_case
```

### å‡†å¤‡è„šæœ¬

ä¸ºäº†æ–¹ä¾¿å¼€å‘ï¼Œå¯ä»¥åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼Œä¸‹é¢ä¸¾ä¸ªä¾‹å­ã€‚

```
// terminal
code caserun caseclean
```

è„šæœ¬ `caserun` ä¸»è¦æ˜¯è´Ÿè´£åº”ç”¨ç¼–è¯‘æˆåŠŸåï¼Œè°ƒè¯•ç®—ä¾‹çš„è¿è¡Œï¼Œæš‚æ—¶å†™å…¥å¦‚ä¸‹å†…å®¹

```
#!/bin/bash

blockMesh -case debug_case | tee debug_case/log.mesh
echo "Meshing done."

ofsp_00_helloWorld -case debug_case | tee debug_case/log.run
```

`caseclean` è„šæœ¬ä¸»è¦æ˜¯è´Ÿè´£æ¸…ç†åº”ç”¨åˆ°åˆ°ç¼–è¯‘å‰çŠ¶æ€ï¼Œå¦‚æœåº”ç”¨è¦ä¿®æ”¹ï¼Œé‚£ä¹ˆæµ‹è¯•ç®—ä¾‹ä¹Ÿè¦è¿˜åŸåˆ°è¿è¡Œå‰çš„çŠ¶æ€ï¼Œæ‰€ä»¥æš‚æ—¶å†™å…¥å¦‚ä¸‹å†…å®¹

```
#!/bin/bash

wclean
rm -rf debug_case/log.*
foamCleanTutorials debug_case
echo "Cleaning done."
```

åº“çš„ç¼–è¯‘æ¸…ç†ä¹Ÿå¯ä»¥ç±»ä¼¼çš„åˆ›å»ºè„šæœ¬ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ã€‚

æˆ‘ä»¬å¯ä»¥ç®€å•çš„è¿è¡Œè¿™äº›è„šæœ¬ï¼Œå¦‚ä¸‹æ‰€ç¤º

```
// terminal
./caserun
```

å¦‚æœè¿è¡Œæé†’ `Permission denied`ï¼Œé‚£å°±éœ€è¦ç»™æ–‡ä»¶æƒé™

```terminal
// terminal
chmod +x caserun caseclean
```

### è¯´æ˜æ–‡ä»¶

ä¸ºäº†æ–¹ä¾¿åç»­å¼€å‘å’Œä½¿ç”¨ï¼Œè¿˜åº”è¯¥å‡†å¤‡è¯´æ˜æ–‡ä»¶ã€‚

```
// terminal
code README.md
```

å†™å…¥éœ€è¦çš„å¼€å‘å¤‡å¿˜ã€è¿è¡Œæ­¥éª¤ã€æ³¨æ„äº‹é¡¹ç­‰å†…å®¹ã€‚è¯·ä¸è¦åå•¬æ—¶é—´ï¼ŒåŠ¡å¿…èŠ±è´¹ä¸€ç‚¹ç‚¹æ—¶é—´æŠŠé—®é¢˜å†™æ¸…æ¥šï¼Œä¸ç„¶æ—¥åè½¬äº¤ä»–äººï¼Œæˆ–è€…è‡ªå·±é‡æ–°é˜…è¯»é¡¹ç›®ï¼Œéƒ½ä¼šååˆ†ç—›è‹¦ã€‚

### é¡¹ç›®ç»“æ„

æ‰€ä»¥ï¼Œé¡¹ç›®çš„æ–‡ä»¶ç»“æ„å¦‚ä¸‹

```
ofsp_00_helloWorld/
â”œâ”€â”€ caseclean
â”œâ”€â”€ caserun
â”œâ”€â”€ debug_case/
â”‚Â Â  â”œâ”€â”€ 0/
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ p
â”‚Â Â  â”‚Â Â  â””â”€â”€ U
â”‚Â Â  â”œâ”€â”€ constant/
â”‚Â Â  â”‚Â Â  â””â”€â”€ transportProperties
â”‚Â Â  â””â”€â”€ system/
â”‚Â Â      â”œâ”€â”€ blockMeshDict
â”‚Â Â      â”œâ”€â”€ controlDict
â”‚Â Â      â”œâ”€â”€ decomposeParDict
â”‚Â Â      â”œâ”€â”€ fvSchemes
â”‚Â Â      â”œâ”€â”€ fvSolution
â”‚Â Â      â””â”€â”€ PDRblockMeshDict
â”œâ”€â”€ Make/
â”‚Â Â  â”œâ”€â”€ files
â”‚Â Â  â””â”€â”€ options
â”œâ”€â”€ ofsp_00_helloWorld.C
â””â”€â”€ README.md

```

æˆ‘ä»¬å‡†å¤‡åœ¨æœ¬é¡¹ç›®ä¸­ä½¿ç”¨å‰æ–‡è®¨è®ºçš„å¼€å‘åº“ï¼Œæ‰€ä»¥è¯¥é¡¹ç›®è·¯å¾„ä¸‹æ²¡æœ‰å¼€å‘åº“æ–‡ä»¶ã€‚

### ä¸»æºç 

æ‰“å¼€ä¸»æºç  `ofsp_00_helloWorld.C`

```cpp
/* 
* OpenFOAM things ... 
*/

#include "fvCFD.H"

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

int main(int argc, char *argv[])
{
    #include "setRootCase.H"
    #include "createTime.H"

    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

    Info<< nl;
    runTime.printExecutionTime(Info);

    Info<< "End\n" << endl;

    return 0;
}


// ************************************************************************* //

```

> è¿™é‡Œçº¦å®š
> - `/* comments */` å†™åœ¨ä»£ç åŠŸèƒ½å—ä¹‹å‰ï¼Œç”¨äºæ­£å¼è¯´æ˜æˆ–è€…ä»‹ç»æ­¤ä»£ç åŠŸèƒ½å—
> - `// comments` å†™åœ¨å…·ä½“ä»£ç è¡Œé™„è¿‘ï¼Œç”¨äºè§£é‡Šã€æ ‡è®°æˆ–è€…æƒ³æ³•ç­‰

ä»£ç è§£é‡Š

- OpenFOAM æ–‡ä»¶å¤´å†…å®¹
	- æ–‡ä¸­å‡çœç•¥å¤„ç†
- `#include "fvCFD.H"`
	- åŒ…å«äº†æ‰€æœ‰çš„ FVM æ–¹æ³•ï¼Œé€šå¸¸å¿…é¡»
- `#include "setRootCase.H"`
	- å»ºç«‹åº”ç”¨çš„å‚æ•°åˆ—è¡¨çš„ç±»ï¼Œæ£€æŸ¥ç®—ä¾‹æ–‡ä»¶ç»“æ„
	- ä½¿ç”¨ `find $FOAM_SRC -name setRootCase.H` å»æŸ¥é˜…
	- åç»­ä¼šè¯¦ç»†è®¨è®º
- `#include "createTime.H"`
	- åˆ›å»º `time` ç±»çš„ `runTime` å¯¹è±¡ï¼Œéœ€è¦ç®—ä¾‹
	- åç»­ä¼šè¯¦ç»†è®¨è®º
- `#include "creatMesh.H"`
	- æ±‚è§£å™¨åº”ç”¨éœ€è¦è¯¥å¤´æ–‡ä»¶
	- åˆ›å»º `fvMesh` ç±»çš„ `mehs` å¯¹è±¡
	- åç»­ä¼šè¯¦ç»†è®¨è®º
- `Info`
	- OpenFOAM æä¾›çš„è¾“å‡ºè¯­æ³•ï¼Œé€‚é… OpenFOAM å¤šç§ç±»å‹
- `nl`
	- OpenFOAM æä¾›çš„æ¢è¡Œç¬¦ï¼Œå’Œ `endl` ç±»ä¼¼
	- æœ¬ç³»åˆ—çº¦å®šï¼Œå½“å­˜åœ¨å¤§æ®µè¾“å‡ºçš„æ—¶å€™ï¼Œä¸­é—´æ¢è¡Œç”¨ `nl` ï¼Œç»“å°¾å¤„ç”¨ `endl`
- `runTime.printExecutionTime(Info)`
	- æ‰“å°æ—¶é—´ç›¸å…³ä¿¡æ¯

### ä¸»æºç å¼€å‘

æˆ‘ä»¬åœ¨ä¸»ä»£ç ä¸­æ·»åŠ ç®€å•çš„å†…å®¹

```cpp
#include "fvCFD.H"

#include "class1.H" // è°ƒç”¨æˆ‘ä»¬æƒ³è¦çš„å…¶ä»–å¼€å‘åº“å¤´æ–‡ä»¶åç§°

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

int main(int argc, char *argv[])
{
    #include "setRootCase.H"
    #include "createTime.H"
    #include "createMesh.H"

    label a = 1;
    scalar pi = 3.1415926;
    Info<< "Hi, OpenFOAM!" << " Here we are." << nl
	    << a << " + " << pi << " = " << a + pi << nl
	    << a << " * " << pi << " = " << a * pi << nl
	    << endl;

    class1 mySolver;
    mySolver.SetLocalTime(0.2);
    Info<< "\nCurrent time step is : " << mySolver.GetLocalTime() << endl;

    // * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //

    Info<< nl;
    runTime.printExecutionTime(Info);

    Info<< "End\n" << endl;

    return 0;
}
```


> æ³¨æ„ï¼Œè¿™é‡Œæ¼”ç¤ºäº†å¦‚ä½•é“¾æ¥ä½¿ç”¨å…¶ä»–å¼€å‘åº“ã€‚
> 
> æœ¬é¡¹ç›®è°ƒç”¨çš„ä¾ç„¶æ˜¯ä¸Šä¸€èŠ‚çš„å¼€å‘åº“ `Aerosand` ï¼ˆè§ `#include class1.H`  ï¼‰ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦å¦¥å–„å¤„ç†é“¾æ¥é—®é¢˜ã€‚

### åº”ç”¨ Make 

é»˜è®¤ç”Ÿæˆçš„ `.../ofsp/ofsp_00_helloWorld/Make/options` åŸºç¡€ä¸Šæ·»åŠ è‡ªå¼€å‘åº“

```cpp
EXE_INC = \
    -I$(LIB_SRC)/finiteVolume/lnInclude \
    -I$(LIB_SRC)/meshTools/lnInclude \
    -I../ofsp_00_helloWorld_tensor/Aerosand/lnInclude

EXE_LIBS = \
    -lfiniteVolume \
    -lmeshTools \
    -L$(FOAM_USER_LIBBIN) \
    -lAerosand

```

- æ³¨æ„ä¹¦å†™æ ¼å¼ï¼Œæ¯”å¦‚æ ‡è¯†ç¬¦ã€è¡Œå°¾çš„ `\` æ¢è¡Œ
	- åŸåˆ™ä¸Šå¯ä»¥ä¸€è¡Œå†™å®Œæ‰€æœ‰è¯­å¥ï¼Œè™½ç„¶æœ‰è­¦å‘Šï¼Œä½†ä¸æ˜¯ä¸è¡Œ
	- ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ï¼Œä½¿ç”¨æ¢è¡Œç¬¦ `\` æ¥æ¢è¡Œï¼Œæ¢è¡Œç¬¦ `\` å‰åå¤šåŠ ç©ºæ ¼æ— æ‰€è°“ï¼Œåé¢å¦‚æœæœ‰ç©ºæ ¼ä¼šæœ‰è­¦å‘Š
- `EXE_INC`
	- ä»¥ `-I` æ ‡è¯†å¼€å¤´åˆ—å‡ºæ‰€æœ‰éœ€è¦åŒ…å«çš„å¤´æ–‡ä»¶çš„è·¯å¾„
	- `$(LIB_SRC)` æ˜¯ç¯å¢ƒå˜é‡
	- å¯ä»¥ç­‰åŒæ›¿æ¢ä¸º `-I$(FOAM_SRC)/finiteVolume/lnInclude`
	- æˆ–è€…ç›´æ¥å†™æˆç»å¯¹åœ°å€ `-I/usr/lib/openfoam/openfoam2306/src/finiteVolume/lnInclude`
	- å¼€å‘åº“çš„è°ƒç”¨æ˜¯ç›¸å¯¹åœ°å€ `../ofsp_00_helloWorld_tensor/Aerosand/lnInclude`
- `EXE_LIBS`
	- å°å†™ `-l` æ ‡è¯†åˆ—å‡ºåº“çš„åå­—
	- å¤§å†™ `-L` æ ‡è¯†åˆ—å‡ºåº“çš„è·¯å¾„

æŸ¥çœ‹é»˜è®¤ç”Ÿæˆçš„ `.../ofsp/ofsp_00_helloWorld/Make/file`ï¼Œå…¶å†…å®¹ä¸éœ€è¦ä¿®æ”¹ã€‚

```cpp
ofsp_00_helloWorld.C

EXE = $(FOAM_USER_APPBIN)/ofsp_00_helloWorld
```

### ç¼–è¯‘è¿è¡Œ

ç¼–è¯‘å¹¶è¿è¡Œè¯¥åº”ç”¨

```
wclean
wmake
./caseclean
./caserun
```

- ç¼–è¯‘æ—¶ä¼šè­¦å‘Š mesh æœªä½¿ç”¨ï¼Œæˆ‘ä»¬ç¡®å®æ²¡æœ‰ä½¿ç”¨ï¼Œè¿™ä¸å½±å“

è¿è¡Œç»“æœå¦‚ä¸‹

```
/*---------------------------------------------------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  2406                                  |
|   \\  /    A nd           | Website:  www.openfoam.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
Build  : _be01ca78-20240625 OPENFOAM=2406 version=2406
Arch   : "LSB;label=32;scalar=64"
Exec   : blockMesh -case debug_case
Date   : Dec 05 2024
Time   : 15:08:43
Host   : aerosand
PID    : 21996
I/O    : uncollated
Case   : /home/aerosand/github/myProjects/openfoamSharing/ofsp/ofsp_00_helloWorld/debug_case
nProcs : 1
trapFpe: Floating point exception trapping enabled (FOAM_SIGFPE).
fileModificationChecking : Monitoring run-time modified files using timeStampMaster (fileModificationSkew 5, maxFileModificationPolls 20)
allowSystemOperations : Allowing user-supplied system call operations

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
Create time

Creating block mesh from "system/blockMeshDict"
Creating block edges
No non-planar block faces defined
Creating topology blocks

Creating topology patches - from boundary section

Creating block mesh topology - scaling/transform applied later

Check topology

        Basic statistics
                Number of internal faces : 0
                Number of boundary faces : 6
                Number of defined boundary faces : 6
                Number of undefined boundary faces : 0
        Checking patch -> block consistency

Creating block offsets
Creating merge list (topological search)...

Creating polyMesh from blockMesh
Creating patches
Creating cells
Creating points with scale (0.1 0.1 0.1)
    Block 0 cell size :
        i : 0.005 .. 0.005
        j : 0.005 .. 0.005
        k : 0.01 .. 0.01

No patch pairs to merge

Writing polyMesh with 0 cellZones
----------------
Mesh Information
----------------
  boundingBox: (0 0 0) (0.1 0.1 0.01)
  nPoints: 882
  nCells: 400
  nFaces: 1640
  nInternalFaces: 760
----------------
Patches
----------------
  patch 0 (start: 760 size: 20) name: movingWall
  patch 1 (start: 780 size: 60) name: fixedWalls
  patch 2 (start: 840 size: 800) name: frontAndBack

End

Meshing done.
/*---------------------------------------------------------------------------*\
| =========                 |                                                 |
| \\      /  F ield         | OpenFOAM: The Open Source CFD Toolbox           |
|  \\    /   O peration     | Version:  2406                                  |
|   \\  /    A nd           | Website:  www.openfoam.com                      |
|    \\/     M anipulation  |                                                 |
\*---------------------------------------------------------------------------*/
Build  : _be01ca78-20240625 OPENFOAM=2406 version=2406
Arch   : "LSB;label=32;scalar=64"
Exec   : ofsp_00_helloWorld -case debug_case
Date   : Dec 05 2024
Time   : 15:08:44
Host   : aerosand
PID    : 21998
I/O    : uncollated
Case   : /home/aerosand/github/myProjects/openfoamSharing/ofsp/ofsp_00_helloWorld/debug_case
nProcs : 1
trapFpe: Floating point exception trapping enabled (FOAM_SIGFPE).
fileModificationChecking : Monitoring run-time modified files using timeStampMaster (fileModificationSkew 5, maxFileModificationPolls 20)
allowSystemOperations : Allowing user-supplied system call operations

// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //
Create time

Create mesh for time = 0

Hi, OpenFOAM! Here we are.
1 + 3.14159 = 4.14159
1 * 3.14159 = 3.14159


Current time step is : 0.2

ExecutionTime = 0 s  ClockTime = 0 s

End
```

ä»¥åçš„è¿è¡Œç»“æœä¸å†èµ˜è¿° OpenFOAM æ ‡å‡†è¾“å‡ºä¿¡æ¯ã€‚

## å°ç»“

åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬åº”è¯¥æ¸…æ¥šæ˜ç™½äº† OpenFOAM åº”ç”¨å¼€å‘çš„é€»è¾‘å’Œæ¶æ„ã€‚

å¸Œæœ›è¿™æ ·çš„ä»‹ç»èƒ½è®©è¯»è€…æ„Ÿå—åˆ°â€œæ¸…æ™°â€å’Œâ€œè¿ç»­â€ã€‚

åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¼€å‘åº“å¯ä»¥æ˜¯ç”¨æˆ·è‡ªå®šä¹‰è¾¹ç•Œæ¡ä»¶ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€äº›ç”¨æˆ·å·¥å…·ç­‰ç­‰ã€‚

